<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

<meta name="theme-color" content="#222">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*è¿›åº¦æ¡é¢œè‰²*/
        height: 3px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*é˜´å½±é¢œè‰²*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*ä¸Šè¾¹æ¡†é¢œè‰²*/
        border-left-color: #1E92FB;    /*å·¦è¾¹æ¡†é¢œè‰²*/
    }
</style>








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="ReactNative">
<meta property="og:type" content="website">
<meta property="og:title" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
<meta property="og:description" content="ReactNative">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
<meta name="twitter:description" content="ReactNative">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/7/"/>





  <title>åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/19/RxSwift/Grammar/Operators-æ•°å­¦å’Œé›†åˆæ“ä½œç¬¦/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/RxSwift/Grammar/Operators-æ•°å­¦å’Œé›†åˆæ“ä½œç¬¦/" itemprop="url">Swift-RxSwift-Mathematical & Aggregate Operators-æ•°å­¦å’Œé›†åˆæ“ä½œç¬¦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-19T16:06:59+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="æ•°å­¦å’Œé›†åˆæ“ä½œç¬¦"><a href="#æ•°å­¦å’Œé›†åˆæ“ä½œç¬¦" class="headerlink" title="æ•°å­¦å’Œé›†åˆæ“ä½œç¬¦"></a>æ•°å­¦å’Œé›†åˆæ“ä½œç¬¦</h1><ul>
<li><a href="#1.1">â‘ toArray</a></li>
<li><a href="#1.2">â‘ â‘¡reduce</a></li>
<li><a href="#1.3">â‘¢concat</a></li>
</ul>
<p><span id="1.1">â‘ toArray</span></p>
<h2 id="â‘ toArray"><a href="#â‘ toArray" class="headerlink" title="â‘ toArray"></a>â‘ toArray</h2><blockquote>
<p>å°†sequenceè½¬æ¢æˆä¸€ä¸ªarrayï¼Œå¹¶è½¬æ¢æˆå•ä¸€äº‹ä»¶ä¿¡å·ï¼Œç„¶åç»“æŸ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.range(start: <span class="number">1</span>, <span class="built_in">count</span>: <span class="number">10</span>)</div><div class="line">          .toArray()</div><div class="line">          .subscribe &#123; </div><div class="line">                    <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">                &#125;</div><div class="line">         .addDisposableTo(disposeBag)</div><div class="line"><span class="comment">//æ‰“å°</span></div><div class="line">next([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>])</div><div class="line">completed</div></pre></td></tr></table></figure>
<p><span id="1.2">â‘¡reduce</span></p>
<h2 id="â‘¡reduce"><a href="#â‘¡reduce" class="headerlink" title="â‘¡reduce"></a>â‘¡reduce</h2><blockquote>
<p>ç”¨ä¸€ä¸ªåˆå§‹å€¼ï¼Œå¯¹äº‹ä»¶æ•°æ®è¿›è¡Œç´¯è®¡æ“ä½œ<br>reduceæ¥å—ä¸€ä¸ªåˆå§‹å€¼ï¼Œå’Œä¸€ä¸ªæ“ä½œç¬¦å·<br>ä½¿ç”¨ä¸€ä¸ªåˆå§‹å€¼å’Œä¸€ä¸ªæ“ä½œç¬¦ï¼Œå¯¹Observableåºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ è¿›è¡Œç´¯è®¡æ“ä½œï¼Œå¹¶è½¬æ¢æˆå•ä¸€äº‹ä»¶ä¿¡å·ã€‚(PS:å’Œmapæœ‰çš„åŒºåˆ«å°±æ˜¯ï¼šmapé’ˆå¯¹å•ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œï¼Œreduceé’ˆå¯¹æ‰€æœ‰å…ƒç´ ç´¯è®¡æ“ä½œ)</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()   </div><div class="line"><span class="type">Observable</span>.of(<span class="number">10</span>, <span class="number">100</span>, <span class="number">1000</span>)</div><div class="line">		    .<span class="built_in">reduce</span>(<span class="number">1</span>, accumulator: +)</div><div class="line">		    .subscribe(onNext: &#123; </div><div class="line">		                 <span class="built_in">print</span>($<span class="number">0</span>) </div><div class="line">		             &#125;)</div><div class="line">		    .addDisposableTo(disposeBag)</div><div class="line"></div><div class="line"><span class="comment">///</span></div><div class="line">  <span class="number">1111</span></div></pre></td></tr></table></figure>
<p><span id="1.3">â‘¢concat</span></p>
<h2 id="â‘¢concat"><a href="#â‘¢concat" class="headerlink" title="â‘¢concat"></a>â‘¢concat</h2><blockquote>
<p>oncatä¼šæŠŠå¤šä¸ªsequenceå’Œå¹¶ä¸ºä¸€ä¸ªsequenceï¼Œå¹¶ä¸”å½“å‰é¢ä¸€ä¸ªsequenceå‘å‡ºäº†completedäº‹ä»¶ï¼Œæ‰ä¼šå¼€å§‹ä¸‹ä¸€ä¸ªsequenceçš„äº‹ä»¶<br>åœ¨ç¬¬ä¸€sequenceå®Œæˆä¹‹å‰ï¼Œç¬¬äºŒä¸ªsequenceå‘å‡ºçš„äº‹ä»¶éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä½†ä¼šæ¥æ”¶ä¸€å®Œæˆä¹‹å‰çš„äºŒå‘å‡ºçš„æœ€åä¸€ä¸ªäº‹ä»¶ã€‚ä¸å¥½è§£é‡Šï¼Œçœ‹ä¾‹å­è¯´æ˜</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="keyword">let</span> subject1 = <span class="type">BehaviorSubject</span>(value: <span class="string">"ğŸ"</span>)</div><div class="line"><span class="keyword">let</span> subject2 = <span class="type">BehaviorSubject</span>(value: <span class="string">"ğŸ¶"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">let</span> variable = <span class="type">Variable</span>(subject1)</div><div class="line">    </div><div class="line">variable.asObservable()</div><div class="line">    .concat()</div><div class="line">    .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">subject1.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">subject1.onNext(<span class="string">"ğŸŠ"</span>)</div><div class="line">    </div><div class="line">variable.value = subject2</div><div class="line">    </div><div class="line"></div><div class="line">subject2.onNext(<span class="string">"ğŸ±"</span>)   <span class="comment">//1å®Œæˆå‰ï¼Œä¼šè¢«å¿½ç•¥</span></div><div class="line">subject2.onNext(<span class="string">"teng"</span>) <span class="comment">//1å®Œæˆå‰ï¼Œä¼šè¢«å¿½ç•¥</span></div><div class="line">subject2.onNext(<span class="string">"fei"</span>)  <span class="comment">//1å®Œæˆå‰çš„æœ€åä¸€ä¸ªï¼Œä¼šè¢«æ¥æ”¶</span></div><div class="line">    </div><div class="line">subject1.onCompleted()</div><div class="line">    </div><div class="line">subject2.onNext(<span class="string">"ğŸ­"</span>)</div><div class="line"></div><div class="line">next(ğŸ)</div><div class="line">next(ğŸ)</div><div class="line">next(ğŸŠ)</div><div class="line">next(fei)</div><div class="line">next(ğŸ­)</div></pre></td></tr></table></figure>
<h1 id="è¿æ¥æ€§æ“ä½œ"><a href="#è¿æ¥æ€§æ“ä½œ" class="headerlink" title="è¿æ¥æ€§æ“ä½œ"></a>è¿æ¥æ€§æ“ä½œ</h1><blockquote>
<p>Connectable Observableæœ‰è®¢é˜…æ—¶ä¸å¼€å§‹å‘å°„äº‹ä»¶æ¶ˆæ¯ï¼Œè€Œæ˜¯ä»…å½“è°ƒç”¨å®ƒä»¬çš„connectï¼ˆï¼‰æ–¹æ³•æ—¶ã€‚è¿™æ ·å°±å¯ä»¥ç­‰å¾…æ‰€æœ‰æˆ‘ä»¬æƒ³è¦çš„è®¢é˜…è€…éƒ½å·²ç»è®¢é˜…äº†ä»¥åï¼Œå†å¼€å§‹å‘å‡ºäº‹ä»¶æ¶ˆæ¯ï¼Œè¿™æ ·èƒ½ä¿è¯æˆ‘ä»¬æƒ³è¦çš„æ‰€æœ‰è®¢é˜…è€…éƒ½èƒ½æ¥æ”¶åˆ°äº‹ä»¶æ¶ˆæ¯ã€‚å…¶å®ä¹Ÿå°±æ˜¯ç­‰å¤§å®¶éƒ½å°±ä½ä»¥åï¼Œå¼€å§‹å‘å‡ºæ¶ˆæ¯</p>
</blockquote>
<h2 id="publish"><a href="#publish" class="headerlink" title="publish"></a>publish</h2><blockquote>
<p>å°†ä¸€ä¸ªæ­£å¸¸çš„sequenceè½¬æ¢æˆä¸€ä¸ªconnectable sequence</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> intSequence = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .publish()</div><div class="line">    </div><div class="line"><span class="number">_</span> = intSequence</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"Subscription 1:, Event: \($0)"</span>) &#125;)</div><div class="line">    </div><div class="line">delay(<span class="number">2</span>) &#123; <span class="number">_</span> = intSequence.connect() &#125; <span class="comment">//ç›¸å½“äºæŠŠäº‹ä»¶æ¶ˆæ¯æ¨è¿Ÿäº†ä¸¤ç§’</span></div><div class="line">    </div><div class="line">delay(<span class="number">4</span>) &#123;</div><div class="line">    <span class="number">_</span> = intSequence</div><div class="line">        .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"Subscription 2:, Event: \($0)"</span>) &#125;)</div><div class="line">&#125;</div><div class="line">    </div><div class="line">delay(<span class="number">6</span>) &#123;</div><div class="line">    <span class="number">_</span> = intSequence</div><div class="line">        .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"Subscription 3:, Event: \($0)"</span>) &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="type">Subscription</span> <span class="number">1</span>:, <span class="type">Event</span>: <span class="number">0</span></div><div class="line"><span class="type">Subscription</span> <span class="number">1</span>:, <span class="type">Event</span>: <span class="number">1</span></div><div class="line"><span class="type">Subscription</span> <span class="number">2</span>:, <span class="type">Event</span>: <span class="number">1</span></div><div class="line"><span class="type">Subscription</span> <span class="number">1</span>:, <span class="type">Event</span>: <span class="number">2</span></div><div class="line"><span class="type">Subscription</span> <span class="number">2</span>:, <span class="type">Event</span>: <span class="number">2</span></div><div class="line"><span class="type">Subscription</span> <span class="number">1</span>:, <span class="type">Event</span>: <span class="number">3</span></div><div class="line"><span class="type">Subscription</span> <span class="number">3</span>:, <span class="type">Event</span>: <span class="number">3</span></div><div class="line"><span class="type">Subscription</span> <span class="number">2</span>:, <span class="type">Event</span>: <span class="number">3</span></div><div class="line"><span class="type">Subscription</span> <span class="number">1</span>:, <span class="type">Event</span>: <span class="number">4</span></div><div class="line"><span class="type">Subscription</span> <span class="number">3</span>:, <span class="type">Event</span>: <span class="number">4</span></div></pre></td></tr></table></figure>
<h2 id="replay"><a href="#replay" class="headerlink" title="replay"></a>replay</h2><blockquote>
<p>å°†ä¸€ä¸ªæ­£å¸¸çš„sequenceè½¬æ¢æˆä¸€ä¸ªconnectable sequenceï¼Œç„¶åå’ŒreplaySubjectç›¸ä¼¼ï¼Œèƒ½æ¥æ”¶åˆ°è®¢é˜…ä¹‹å‰çš„äº‹ä»¶æ¶ˆæ¯</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> intSequence = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .replay(<span class="number">5</span>)  <span class="comment">//æ¥æ”¶åˆ°è®¢é˜…ä¹‹å‰çš„5æ¡äº‹ä»¶æ¶ˆæ¯</span></div><div class="line">    </div><div class="line"><span class="number">_</span> = intSequence</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"Subscription 1:, Event: \($0)"</span>) &#125;)</div><div class="line">    </div><div class="line">delay(<span class="number">2</span>) &#123; <span class="number">_</span> = intSequence.connect() &#125;</div><div class="line">    </div><div class="line">delay(<span class="number">4</span>) &#123;</div><div class="line">    <span class="number">_</span> = intSequence</div><div class="line">        .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"Subscription 2:, Event: \($0)"</span>) &#125;)</div><div class="line">&#125;</div><div class="line">    </div><div class="line">delay(<span class="number">8</span>) &#123;</div><div class="line">    <span class="number">_</span> = intSequence</div><div class="line">        .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"Subscription 3:, Event: \($0)"</span>) &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="multicast"><a href="#multicast" class="headerlink" title="multicast"></a>multicast</h2><blockquote>
<p>å°†ä¸€ä¸ªæ­£å¸¸çš„sequenceè½¬æ¢æˆä¸€ä¸ªconnectable sequenceï¼Œå¹¶ä¸”é€šè¿‡ç‰¹æ€§çš„subjectå‘é€å‡ºå»ï¼Œæ¯”å¦‚PublishSubjectï¼Œæˆ–è€…replaySubjectï¼ŒbehaviorSubjectç­‰ã€‚ä¸åŒçš„Subjectä¼šæœ‰ä¸åŒçš„ç»“æœ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> subject = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line">    </div><div class="line"><span class="number">_</span> = subject</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"Subject: \($0)"</span>) &#125;)</div><div class="line">    </div><div class="line"><span class="keyword">let</span> intSequence = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">1</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .multicast(subject)</div><div class="line">    </div><div class="line"><span class="number">_</span> = intSequence</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"\tSubscription 1:, Event: \($0)"</span>) &#125;)</div><div class="line">    </div><div class="line">delay(<span class="number">2</span>) &#123; <span class="number">_</span> = intSequence.connect() &#125;</div><div class="line">    </div><div class="line">delay(<span class="number">4</span>) &#123;</div><div class="line">    <span class="number">_</span> = intSequence</div><div class="line">        .subscribe(onNext: &#123; <span class="built_in">print</span>(<span class="string">"\tSubscription 2:, Event: \($0)"</span>) &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h1><h2 id="catchErrorJustReturn"><a href="#catchErrorJustReturn" class="headerlink" title="catchErrorJustReturn"></a>catchErrorJustReturn</h2><blockquote>
<p>é‡åˆ°erroräº‹ä»¶çš„æ—¶å€™ï¼Œå°±returnä¸€ä¸ªå€¼ï¼Œç„¶åç»“æŸ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="keyword">let</span> sequenceThatFails = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">    </div><div class="line">sequenceThatFails</div><div class="line">    .catchErrorJustReturn(<span class="string">"ğŸ˜Š"</span>)</div><div class="line">    .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ˜¬"</span>)</div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ˜¨"</span>)</div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ˜¡"</span>)</div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ”´"</span>)</div><div class="line">sequenceThatFails.onError(<span class="type">TestError</span>.test)</div><div class="line"></div><div class="line"><span class="comment">///</span></div><div class="line">next(ğŸ˜¬)</div><div class="line">next(ğŸ˜¨)</div><div class="line">next(ğŸ˜¡)</div><div class="line">next(ğŸ”´)</div><div class="line">next(ğŸ˜Š)</div><div class="line">completed</div></pre></td></tr></table></figure>
<h2 id="catchError"><a href="#catchError" class="headerlink" title="catchError"></a>catchError</h2><blockquote>
<p>æ•è·errorè¿›è¡Œå¤„ç†ï¼Œå¯ä»¥è¿”å›å¦ä¸€ä¸ªsequenceè¿›è¡Œè®¢é˜…</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="keyword">let</span> sequenceThatFails = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> recoverySequence = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">    </div><div class="line">sequenceThatFails</div><div class="line">    .catchError &#123;</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Error:"</span>, $<span class="number">0</span>)</div><div class="line">        <span class="keyword">return</span> recoverySequence</div><div class="line">    &#125;</div><div class="line">    .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ˜¬"</span>)</div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ˜¨"</span>)</div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ˜¡"</span>)</div><div class="line">sequenceThatFails.onNext(<span class="string">"ğŸ”´"</span>)</div><div class="line">sequenceThatFails.onError(<span class="type">TestError</span>.test)</div><div class="line">    </div><div class="line">recoverySequence.onNext(<span class="string">"ğŸ˜Š"</span>)</div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line">next(ğŸ˜¬)</div><div class="line">next(ğŸ˜¨)</div><div class="line">next(ğŸ˜¡)</div><div class="line">next(ğŸ”´)</div><div class="line"><span class="type">Error</span>: test</div><div class="line">next(ğŸ˜Š)</div></pre></td></tr></table></figure>
<h2 id="retry"><a href="#retry" class="headerlink" title="retry"></a>retry</h2><blockquote>
<p>é‡è§erroräº‹ä»¶å¯ä»¥è¿›è¡Œé‡è¯•ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œå¯ä»¥è¿›è¡Œé‡æ–°è¿æ¥</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">1</span></div><div class="line">    </div><div class="line"><span class="keyword">let</span> sequenceThatErrors = <span class="type">Observable</span>&lt;<span class="type">String</span>&gt;.create &#123; observer <span class="keyword">in</span></div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸŠ"</span>)</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> <span class="built_in">count</span> == <span class="number">1</span> &#123;</div><div class="line">        observer.onError(<span class="type">TestError</span>.test)</div><div class="line">        <span class="built_in">print</span>(<span class="string">"Error encountered"</span>)</div><div class="line">        <span class="built_in">count</span> += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    observer.onNext(<span class="string">"ğŸ¶"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ±"</span>)</div><div class="line">    observer.onNext(<span class="string">"ğŸ­"</span>)</div><div class="line">    observer.onCompleted()</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="type">Disposables</span>.create()</div><div class="line">&#125;</div><div class="line">    </div><div class="line">sequenceThatErrors</div><div class="line">    .retry(<span class="number">3</span>)       <span class="comment">//ä¸ä¼ å…¥æ•°å­—çš„è¯ï¼Œåªä¼šé‡è¯•ä¸€æ¬¡</span></div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h1 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h1><blockquote>
<p>æ‰“å°æ‰€æœ‰çš„è®¢é˜…, äº‹ä»¶å’Œdisposals</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   </div><div class="line"></div><div class="line">sequenceThatErrors</div><div class="line">    .retry(<span class="number">3</span>)</div><div class="line">    .debug()</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<h1 id="RxSwift-Resources-total"><a href="#RxSwift-Resources-total" class="headerlink" title="RxSwift.Resources.total"></a>RxSwift.Resources.total</h1><blockquote>
<p>æŸ¥çœ‹RxSwiftæ‰€æœ‰èµ„æºçš„å ç”¨</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="built_in">print</span>(<span class="type">RxSwift</span>.<span class="type">Resources</span>.total)</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/19/RxSwift/Grammar/Operators-è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œç¬¦/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/RxSwift/Grammar/Operators-è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œç¬¦/" itemprop="url">Swift-RxSwift-è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œç¬¦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-19T16:06:59+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œç¬¦"><a href="#è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œç¬¦" class="headerlink" title="è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œç¬¦"></a>è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œç¬¦</h1><p><a href="#1.1">â‘ filter</a><br><a href="#1.2">â‘¡distinctUntilChanged</a><br><a href="#1.3">â‘¢elementAt</a><br><a href="#1.4">â‘£single</a><br><a href="#1.5">â‘¤take</a><br><a href="#1.6">â‘¥takeLast</a><br><a href="#1.7">â‘¦takeWhile</a><br><a href="#1.8">â‘§takeUntil</a><br><a href="#1.9">â‘¨skip</a><br><a href="#1.10">â‘© skipWhile</a><br><a href="#1.11">â‘ªskipWhileWithIndex</a><br><a href="#1.12">â‘«skipUntil</a> </p>
<p><span id="1.1">â‘ filter </span></p>
<h2 id="â‘ filter"><a href="#â‘ filter" class="headerlink" title="â‘ filter"></a>â‘ filter</h2><blockquote>
<p>è¿‡æ»¤æ‰æŸäº›ä¸ç¬¦åˆè¦æ±‚çš„äº‹ä»¶<br>åœ¨Observableåºåˆ—ä¸­åªå‘å‡ºæ»¡è¶³è¿‡æ»¤æ¡ä»¶çš„äº‹ä»¶</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(</div><div class="line">    <span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>,</div><div class="line">    <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>,</div><div class="line">    <span class="string">"ğŸ¹"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ±"</span>)</div><div class="line">    .<span class="built_in">filter</span> &#123;</div><div class="line">        $<span class="number">0</span> == <span class="string">"ğŸ±"</span></div><div class="line">    &#125;</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line"><span class="comment">///</span></div><div class="line">ğŸ±</div><div class="line">ğŸ±</div><div class="line">ğŸ±</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line">  <span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">            .<span class="built_in">filter</span>(</div><div class="line">                   &#123;$<span class="number">0</span> &gt; <span class="number">2</span>&#125;</div><div class="line">                   )</div><div class="line">            .subscribe(</div><div class="line">                       onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;</div><div class="line">                      )</div><div class="line">            .disposed(by: disposeBag)</div><div class="line"><span class="comment">//æ‰“å°ç»“æœ</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">5</span></div></pre></td></tr></table></figure>
<p><span id="1.2">â‘¡distinctUntilChanged </span></p>
<h2 id="â‘¡distinctUntilChanged"><a href="#â‘¡distinctUntilChanged" class="headerlink" title="â‘¡distinctUntilChanged"></a>â‘¡distinctUntilChanged</h2><blockquote>
<p>è¿‡æ»¤è¿ç»­å‘å‡ºçš„ç›¸åŒäº‹ä»¶<br>distinctUntilChangedå°±æ˜¯å½“ä¸‹ä¸€ä¸ªäº‹ä»¶ä¸å‰ä¸€ä¸ªäº‹ä»¶æ˜¯ä¸åŒäº‹ä»¶çš„äº‹ä»¶æ‰è¿›è¡Œå¤„ç†æ“ä½œ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸ±"</span>, <span class="string">"ğŸ±"</span>, <span class="string">"ğŸ±"</span>, <span class="string">"ğŸµ"</span>, <span class="string">"ğŸ±"</span>)</div><div class="line">    .distinctUntilChanged()</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line"></div><div class="line"><span class="comment">///</span></div><div class="line">ğŸ±</div><div class="line">ğŸ·</div><div class="line">ğŸ±</div><div class="line">ğŸµ</div><div class="line">ğŸ±</div></pre></td></tr></table></figure>
<p><span id="1.3">â‘¢elementAt </span></p>
<h2 id="â‘¢elementAt"><a href="#â‘¢elementAt" class="headerlink" title="â‘¢elementAt"></a>â‘¢elementAt</h2><blockquote>
<p>åªå¤„ç†åœ¨æŒ‡å®šä½ç½®çš„äº‹ä»¶</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line">    .elementAt(<span class="number">3</span>)</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line"><span class="comment">//</span></div><div class="line">ğŸ¸</div></pre></td></tr></table></figure>
<p><span id="1.4">â‘£single</span></p>
<h2 id="â‘£single"><a href="#â‘£single" class="headerlink" title="â‘£single"></a>â‘£single</h2><blockquote>
<p>ç”¨æ³•ä¸€ï¼šæ£€æµ‹Observableåºåˆ—æ˜¯å¦å‘å°„ä¸€ä¸ªå…ƒç´ ã€‚å¦‚æœå‘å°„å¤šä¸ªï¼Œä¼šæŠ¥é”™</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"></div><div class="line"><span class="comment">// error:Sequence contains more than one element</span></div><div class="line"><span class="comment">// Observable.of(1,2,3).single().subscribe(onNext: &#123;print($0)&#125;).disposed(by: disposeBag)</span></div><div class="line"></div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>)</div><div class="line">          .single()</div><div class="line">          .subscribe(</div><div class="line">                     onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;</div><div class="line">                    )</div><div class="line">          .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ç”¨æ³•äºŒ:æ£€æµ‹Observableåºåˆ—å‘å°„çš„å…ƒç´ é‡Œé¢æ˜¯å¦åŒ…å«å¤šä¸ªæŒ‡å®šçš„å…ƒç´ ï¼Œå¦‚æœæœ‰å¤šä¸ªæˆ–è€…æ²¡æœ‰ï¼Œä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line">    .single &#123; $<span class="number">0</span> == <span class="string">"ğŸ¸"</span> &#125;</div><div class="line">    .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .disposed(by: disposeBag)</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>)</div><div class="line">    .single &#123; $<span class="number">0</span> == <span class="string">"ğŸ’"</span> &#125;</div><div class="line">    .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .disposed(by: disposeBag)</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¶"</span>,<span class="string">"ğŸ¸"</span>)</div><div class="line">    .single &#123; $<span class="number">0</span> == <span class="string">"ğŸ¶"</span> &#125;</div><div class="line">    .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .disposed(by: disposeBag</div><div class="line">    </div><div class="line">   <span class="comment">//æ‰“å°ç»“æœ</span></div><div class="line">	next(ğŸ¸)</div><div class="line">	completed</div><div class="line">	error(<span class="type">Sequence</span> doesn't contain any elements.)</div><div class="line">	next(ğŸ¶)</div><div class="line">	error(<span class="type">Sequence</span> <span class="built_in">contains</span> more than one element.)</div></pre></td></tr></table></figure>
<blockquote>
<p>å‡ºåœ¨sequenceåªå‘å‡ºä¸€æ¬¡çš„äº‹ä»¶ï¼Œå¦‚æœè¶…è¿‡ä¸€ä¸ªå°±ä¼šå‘å‡ºerroré”™è¯¯</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line"> .single()</div><div class="line"> .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line"> .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  ğŸ±  <span class="comment">//å•ä¸€ä¿¡å·è¶…è¿‡äº†ä¸€ä¸ª</span></div><div class="line"><span class="type">Received</span> unhandled error: /<span class="keyword">var</span>/folders/hz/v15ld5mj0nqf83d21j13y0tw0000gn/<span class="type">T</span>/./lldb/<span class="number">7229</span>/playground107.swift:<span class="number">69</span>:__lldb_expr_107 -&gt; <span class="type">Sequence</span> <span class="built_in">contains</span> more than one element.</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line"> .single &#123; $<span class="number">0</span> == <span class="string">"ğŸ¸"</span> &#125;      <span class="comment">//é’è›™åªæœ‰ä¸€ä¸ªï¼Œcompleted</span></div><div class="line"> .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line"> .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>)</div><div class="line"> .single &#123; $<span class="number">0</span> == <span class="string">"ğŸ°"</span> &#125; <span class="comment">//å…”å­æœ‰ä¸¤ä¸ªï¼Œä¼šå‘å‡ºerror</span></div><div class="line"> .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line"> .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line"> .single &#123; $<span class="number">0</span> == <span class="string">"ğŸ”µ"</span> &#125; <span class="comment">//æ²¡æœ‰è“è‰²çƒï¼Œä¼šå‘å‡ºerror</span></div><div class="line"> .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line"> .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p><span id="1.5">â‘¤take</span></p>
<h2 id="â‘¤take"><a href="#â‘¤take" class="headerlink" title="â‘¤take"></a>â‘¤take</h2><blockquote>
<p>åªå¤„ç†å‰å‡ ä¸ªäº‹ä»¶ä¿¡å·</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line">    .take(<span class="number">3</span>)</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line">ğŸ±</div><div class="line">ğŸ°</div><div class="line">ğŸ¶</div></pre></td></tr></table></figure>
<blockquote>
<p>ä»Observableåºåˆ—å¼€å§‹ç‚¹èµ·åªå¤„ç†å‰å‡ ä¸ªäº‹ä»¶</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">         .take(<span class="number">2</span>)</div><div class="line">         .subscribe(</div><div class="line">                    onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;</div><div class="line">                   )</div><div class="line">         .disposed(by: disposeBag)</div><div class="line"></div><div class="line"><span class="comment">//æ‰“å°ç»“æœ:</span></div><div class="line"> <span class="number">1</span></div><div class="line"> <span class="number">2</span></div></pre></td></tr></table></figure>
<p><span id="1.6">â‘¥takeLast</span></p>
<h2 id="â‘¥takeLast"><a href="#â‘¥takeLast" class="headerlink" title="â‘¥takeLast"></a>â‘¥takeLast</h2><blockquote>
<p>åªå¤„ç†åå‡ ä¸ªäº‹ä»¶ä¿¡å·<br>ä¸takeç›¸åï¼Œä»Observableåºåˆ—çš„ç»“æŸä½ç½®èµ·ï¼Œåªå¤„ç†å‰å‡ ä¸ªäº‹ä»¶</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line">    .takeLast(<span class="number">3</span>)</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line"><span class="comment">//æ‰“å°ç»“æœ</span></div><div class="line">ğŸ¸</div><div class="line">ğŸ·</div><div class="line">ğŸµ</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()    </div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">          .takeLast(<span class="number">2</span>)</div><div class="line">          .subscribe(onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;)</div><div class="line">          .disposed(by: disposeBag)</div><div class="line"></div><div class="line"><span class="comment">//æ‰“å°ç»“æœ</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<p><span id="1.7">â‘¦takeWhile</span></p>
<h2 id="â‘¦takeWhile"><a href="#â‘¦takeWhile" class="headerlink" title="â‘¦takeWhile"></a>â‘¦takeWhile</h2><blockquote>
<p>åªå¤„ç†æ»¡è¶³æ¡ä»¶çš„äº‹ä»¶ã€‚æ„Ÿè§‰å’Œfilteræ²¡ä»€ä¹ˆåŒºåˆ«</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">   </div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line">    .takeWhile &#123; $<span class="number">0</span> &lt; <span class="number">4</span> &#125;</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">   <span class="comment">//æ‰“å°ç»“æœï¼š</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">          .takeWhile&#123;$<span class="number">0</span> &lt; <span class="number">3</span>&#125;</div><div class="line">          .subscribe(onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;)</div><div class="line">          .disposed(by: disposeBag)</div><div class="line"></div><div class="line"><span class="comment">//æ‰“å°ç»“æœï¼š</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p><span id="1.8">â‘§takeUntil</span></p>
<h2 id="â‘§takeUntil"><a href="#â‘§takeUntil" class="headerlink" title="â‘§takeUntil"></a>â‘§takeUntil</h2><blockquote>
<p>æ¥æ”¶äº‹ä»¶æ¶ˆæ¯ï¼Œç›´åˆ°å¦ä¸€ä¸ªsequenceå‘å‡ºäº‹ä»¶æ¶ˆæ¯çš„æ—¶å€™</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">   </div><div class="line"><span class="keyword">let</span> sourceSequence = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> referenceSequence = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">   </div><div class="line">sourceSequence</div><div class="line">    .takeUntil(referenceSequence)</div><div class="line">    .subscribe &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">   </div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ±"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ°"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ¶"</span>)</div><div class="line">    </div><div class="line">referenceSequence.onNext(<span class="string">"ğŸ”´"</span>)  <span class="comment">//åœæ­¢æ¥æ”¶æ¶ˆæ¯</span></div><div class="line">    </div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ¸"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ·"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸµ"</span>)</div><div class="line"></div><div class="line"><span class="comment">///</span></div><div class="line">next(ğŸ±)</div><div class="line">next(ğŸ°)</div><div class="line">next(ğŸ¶)</div><div class="line">completed</div></pre></td></tr></table></figure>
<blockquote>
<p>ç›´åˆ°å¦ä¸€ä¸ªObservableåºåˆ—å‘å‡ºä¸€ä¸ªä¿¡å·ï¼Œåˆ™åŸåºåˆ—ç»ˆ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">   </div><div class="line"><span class="keyword">let</span> orinSubject = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line"><span class="keyword">let</span> refreSubject = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line">    </div><div class="line">orinSubject.takeUntil(refreSubject)</div><div class="line">           .subscribe(onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;)</div><div class="line">           .disposed(by: disposeBag)</div><div class="line">    </div><div class="line">orinSubject.onNext(<span class="number">1</span>)</div><div class="line">orinSubject.onNext(<span class="number">2</span>)</div><div class="line">refreSubject.onNext(<span class="number">10</span>)</div><div class="line">orinSubject.onNext(<span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="comment">//æ‰“å°ç»“æœ</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div></pre></td></tr></table></figure>
<p><span id="1.9">â‘¨skip</span></p>
<h2 id="â‘¨skip"><a href="#â‘¨skip" class="headerlink" title="â‘¨skip"></a>â‘¨skip</h2><blockquote>
<p>å–æ¶ˆå‰å‡ ä¸ªäº‹ä»¶</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">   </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line">    .skip(<span class="number">2</span>)</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line"></div><div class="line"> <span class="comment">//</span></div><div class="line"> ğŸ¶</div><div class="line"> ğŸ¸</div><div class="line"> ğŸ·</div><div class="line"> ğŸµ</div></pre></td></tr></table></figure>
<blockquote>
<p>ä»Observableåºåˆ—çš„å…ƒç´ è·³è¿‡æŒ‡å®šä¸ªæ•°</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</div><div class="line">          .skip(<span class="number">2</span>)</div><div class="line">          .subscribe(onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;)</div><div class="line">          .disposed(by: disposeBag)</div><div class="line"><span class="comment">//æ‰“å°ç»“æœï¼š</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">6</span></div></pre></td></tr></table></figure>
<p><span id="1.10">â‘©skipWhile</span></p>
<h2 id="â‘©-skipWhile"><a href="#â‘©-skipWhile" class="headerlink" title="â‘© skipWhile"></a>â‘© skipWhile</h2><blockquote>
<p>æ»¡è¶³æ¡ä»¶çš„äº‹ä»¶æ¶ˆæ¯éƒ½å–æ¶ˆ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line">    .skipWhile &#123; $<span class="number">0</span> &lt; <span class="number">4</span> &#125;</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">	<span class="comment">///</span></div><div class="line">	<span class="number">4</span></div><div class="line">	<span class="number">5</span></div><div class="line">	<span class="number">6</span></div></pre></td></tr></table></figure>
<blockquote>
<p>è·³è¿‡æ»¡è¶³æ¡ä»¶çš„äº‹ä»¶ï¼Œåªè¦é‡è§ä¸æ»¡è¶³æ¡ä»¶çš„äº‹ä»¶ï¼Œåˆ™è¯¥äº‹ä»¶ä»¥åŠä¹‹åçš„äº‹ä»¶ï¼ˆä¸ç®¡æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼‰éƒ½ä¼šå‘å‡º</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()    </div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>)</div><div class="line">          .skipWhile&#123;$<span class="number">0</span> &lt; <span class="number">3</span>&#125;</div><div class="line">          .subscribe(onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;)</div><div class="line">          .disposed(by: disposeBag)</div><div class="line"><span class="comment">//æ‰“å°ç»“æœ</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">6</span></div></pre></td></tr></table></figure>
<p><span id="1.11">â‘ªskipWhileWithIndex</span></p>
<h2 id="â‘ªskipWhileWithIndex"><a href="#â‘ªskipWhileWithIndex" class="headerlink" title="â‘ªskipWhileWithIndex"></a>â‘ªskipWhileWithIndex</h2><blockquote>
<p>æ»¡è¶³æ¡ä»¶çš„éƒ½è¢«å–æ¶ˆï¼Œä¼ å…¥çš„é—­åŒ…åŒskipWhileæœ‰ç‚¹åŒºåˆ«è€Œå·²</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="type">Observable</span>.of(<span class="string">"ğŸ±"</span>, <span class="string">"ğŸ°"</span>, <span class="string">"ğŸ¶"</span>, <span class="string">"ğŸ¸"</span>, <span class="string">"ğŸ·"</span>, <span class="string">"ğŸµ"</span>)</div><div class="line">    .skipWhileWithIndex &#123; element, index <span class="keyword">in</span></div><div class="line">        index &lt; <span class="number">3</span></div><div class="line">    &#125;</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>è·³è¿‡ç´¢å¼•æ»¡è¶³æ¡ä»¶çš„äº‹ä»¶</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"> <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>).skipWhileWithIndex(&#123; (element, index) -&gt; <span class="type">Bool</span> <span class="keyword">in</span></div><div class="line">        index &lt; <span class="number">3</span></div><div class="line">    &#125;).subscribe(onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;).disposed(by: disposeBag)</div><div class="line">  <span class="comment">//æ‰“å°ç»“æœ:</span></div><div class="line">  <span class="number">4</span></div><div class="line"><span class="number">5</span></div><div class="line"><span class="number">6</span></div></pre></td></tr></table></figure>
<p><span id="1.12">â‘«skipUntil</span></p>
<h2 id="â‘«skipUntil"><a href="#â‘«skipUntil" class="headerlink" title="â‘«skipUntil"></a>â‘«skipUntil</h2><blockquote>
<p>ç›´åˆ°æŸä¸ªsequenceå‘å‡ºäº†äº‹ä»¶æ¶ˆæ¯ï¼Œæ‰å¼€å§‹æ¥æ”¶å½“å‰sequenceå‘å‡ºçš„äº‹ä»¶æ¶ˆæ¯</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">   </div><div class="line"><span class="keyword">let</span> sourceSequence = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> referenceSequence = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">    </div><div class="line">sourceSequence</div><div class="line">    .skipUntil(referenceSequence)</div><div class="line">    .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ±"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ°"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ¶"</span>)</div><div class="line">    </div><div class="line">referenceSequence.onNext(<span class="string">"ğŸ”´"</span>)</div><div class="line">    </div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ¸"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸ·"</span>)</div><div class="line">sourceSequence.onNext(<span class="string">"ğŸµ"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>è·³è¿‡å¦ä¸€ä¸ªObservableåºåˆ—å‘å‡ºäº‹ä»¶ä¹‹å‰çš„æ‰€æœ‰äº‹ä»¶<br>ä¸takeUntilç›¸åã€‚</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">   </div><div class="line">  <span class="keyword">let</span> oriSubject = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line">  <span class="keyword">let</span> refreSubject = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line">   </div><div class="line">oriSubject.skipUntil(refreSubject)</div><div class="line">          .subscribe(onNext: &#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;)</div><div class="line">          .disposed(by: disposeBag)</div><div class="line">    </div><div class="line">oriSubject.onNext(<span class="number">1</span>)</div><div class="line">oriSubject.onNext(<span class="number">2</span>)</div><div class="line">    </div><div class="line">refreSubject.onNext(<span class="number">10</span>)</div><div class="line">oriSubject.onNext(<span class="number">3</span>)</div><div class="line">oriSubject.onNext(<span class="number">4</span>)</div><div class="line"></div><div class="line"><span class="comment">//æ‰“å°ç»“æœ:</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/19/RxSwift/Demo/Swift-RxSwift-è½¬æ¢æ“ä½œç¬¦/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/RxSwift/Demo/Swift-RxSwift-è½¬æ¢æ“ä½œç¬¦/" itemprop="url">Swift-RxSwift-è½¬æ¢æ“ä½œç¬¦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-19T16:02:50+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://blog.csdn.net/xiaochuanding/article/details/53727426" target="_blank" rel="external">è¿™æ˜¯java</a><br>Buffer():<br>2.map() flatMap()<br>3.concatMap()<br>4.switchMap():<br>5.cast():<br>6.groupBy():<br>7.scan():<br>8.window():</p>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/19/RxSwift/Grammar/çº¿ç¨‹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/RxSwift/Grammar/çº¿ç¨‹/" itemprop="url">Swift-RxSwift-çº¿ç¨‹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-19T14:04:51+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#çº¿ç¨‹</p>
<h2 id="çº¿ç¨‹åˆ‡æ¢"><a href="#çº¿ç¨‹åˆ‡æ¢" class="headerlink" title="çº¿ç¨‹åˆ‡æ¢"></a>çº¿ç¨‹åˆ‡æ¢</h2><blockquote>
<p>RxSwift ä¸­åˆ‡æ¢çº¿ç¨‹</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">sequence1</div><div class="line">.observeOn(backgroundScheduler) <span class="comment">// åˆ‡æ¢åˆ°åå°çº¿ç¨‹</span></div><div class="line">.<span class="built_in">map</span> &#123; n <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"åœ¨ background scheduler æ‰§è¡Œ"</span>)</div><div class="line">&#125;</div><div class="line">.observeOn(<span class="type">MainScheduler</span>.instance) <span class="comment">// åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹</span></div><div class="line">.<span class="built_in">map</span> &#123; n <span class="keyword">in</span></div><div class="line">    <span class="built_in">print</span>(<span class="string">"åœ¨ main scheduler"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>è°ƒç”¨ä¸€ä¸‹ observeOn å°±åˆ‡æ¢åˆ°æˆ‘ä»¬æƒ³è¦çš„çº¿ç¨‹äº†<br>å½“å‰çš„çº¿ç¨‹åˆ‡æ¢æ”¯æŒ GCD å’Œ NSOperation<br>åœ¨çº¿ç¨‹è¿™éƒ¨åˆ†ä¸»è¦æœ‰ä¸¤ä¸ªæ“ä½œç¬¦ï¼šobserveOn å’Œ subscribeOn ï¼Œå¸¸ç”¨çš„è¿˜æ˜¯ observeOn</p>
</blockquote>
<ul>
<li>è°ƒç”¨ observeOn æŒ‡å®šæ¥ä¸‹æ¥çš„æ“ä½œåœ¨å“ªä¸ªçº¿ç¨‹</li>
<li>è°ƒç”¨ subscribeOn å†³å®šè®¢é˜…è€…çš„æ“ä½œæ‰§è¡Œåœ¨å“ªä¸ªçº¿ç¨‹</li>
</ul>
<blockquote>
<p>å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ˜ç¡®è°ƒç”¨è¿™ä¸¤ä¸ªæ“ä½œï¼Œåé¢çš„æ“ä½œéƒ½æ˜¯åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œçš„</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="class"><span class="keyword">extension</span> <span class="title">ObservableType</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">observeOn</span><span class="params">(scheduler: ImmediateSchedulerType)</span></span> -&gt; <span class="type">RxSwift</span>.<span class="type">Observable</span>&lt;<span class="type">Self</span>.<span class="type">E</span>&gt;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">subscribeOn</span><span class="params">(scheduler: ImmediateSchedulerType)</span></span> -&gt; <span class="type">RxSwift</span>.<span class="type">Observable</span>&lt;<span class="type">Self</span>.<span class="type">E</span>&gt;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>ä¸¤ä¸ªæ–¹æ³•çš„å£°æ˜å‡ ä¹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ å…¥ä¸€ä¸ªæ»¡è¶³ ImmediateSchedulerType åè®®çš„ä¸œè¥¿</p>
</blockquote>
<h2 id="MainScheduler-ä¸²è¡Œ"><a href="#MainScheduler-ä¸²è¡Œ" class="headerlink" title="MainScheduler ä¸²è¡Œ"></a>MainScheduler ä¸²è¡Œ</h2><blockquote>
<p>åœ¨ Rx ä¸­æˆ‘ä»¬å·²ç»æœ‰ä¸»çº¿ç¨‹åˆ‡æ¢</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">.observeOn(<span class="type">MainScheduler</span>.instance)<span class="comment">//åˆ‡æ¢åˆ°äº†ä¸»çº¿ç¨‹</span></div></pre></td></tr></table></figure>
<blockquote>
<p>MainScheduler æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">ensureExecutingOnScheduler</span>()</span></div></pre></td></tr></table></figure>
<blockquote>
<p>å¯ä»¥åœ¨éœ€è¦ä¿è¯ä»£ç ä¸€å®šæ‰§è¡Œåœ¨ä¸»çº¿ç¨‹çš„åœ°æ–¹è°ƒç”¨ MainScheduler.ensureExecutingOnScheduler()<br>ç‰¹åˆ«æ˜¯åœ¨çº¿ç¨‹åˆ‡æ¢æ¥åˆ‡æ¢å»çš„æƒ…å†µä¸‹ï¼Œæˆ–è€…æ˜¯è°ƒç”¨å…¶ä»–çš„åº“ï¼Œæˆ‘ä»¬ä¸ç¡®å®šå½“å‰æ˜¯å¦åœ¨æ‰§è¡Œåœ¨ä¸»çº¿ç¨‹<br>æ¯•ç«Ÿ UI çš„æ›´æ–°è¿˜æ˜¯è¦åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œçš„</p>
</blockquote>
<h2 id="SerialDispatchQueueScheduler-ä¸²è¡Œ"><a href="#SerialDispatchQueueScheduler-ä¸²è¡Œ" class="headerlink" title="SerialDispatchQueueScheduler ä¸²è¡Œ"></a>SerialDispatchQueueScheduler ä¸²è¡Œ</h2><ul>
<li>SerialDispatchQueueScheduler ï¼Œè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è°ƒåº¦å™¨ï¼Œä¸Šé¢çš„ MainScheduler å°±æ˜¯ç»§æ‰¿çš„è¿™ä¸ª</li>
</ul>
<blockquote>
<p>DispatchQueueSchedulerQOS<br>iOS 8 æ–°å¢åŠ äº† QOS ï¼Œåˆ†åˆ«æœ‰ä»¥ä¸‹äº”ç§ç­‰çº§ï¼š</p>
</blockquote>
<ul>
<li>QOS_CLASS_USER_INTERACTIVE</li>
<li>QOS_CLASS_USER_INITIATED</li>
<li>QOS_CLASS_DEFAULT</li>
<li>QOS_CLASS_UTILITY</li>
<li>QOS_CLASS_BACKGROUND</li>
</ul>
<blockquote>
<p>åœ¨ Rx ä¸­ï¼Œæˆ‘ä»¬ç”¨ enum åˆ›å»ºäº† DispatchQueueSchedulerQOS ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">DispatchQueueSchedulerQOS</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">UserInteractive</span></div><div class="line">    <span class="keyword">case</span> <span class="type">UserInitiated</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Default</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Utility</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Background</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>å’Œä¸Šé¢çš„ç­‰çº§æ˜¯ä¸€ä¸€å¯¹åº”çš„<br>ç”¨ QOS åˆ›å»ºä¸€ä¸ª DispatchQueueSchedulerQOS éå¸¸æ–¹ä¾¿</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(globalConcurrentQueueQOS: <span class="type">DispatchQueueSchedulerQOS</span>, </div><div class="line">internalSerialQueueName: <span class="type">String</span> = <span class="string">"rx.global_dispatch_queue.serial"</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>ç”¨ä¸€ä¸ªåˆå§‹åŒ–å°± OK ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="type">SerialDispatchQueueScheduler</span>(globalConcurrentQueueQOS: .<span class="type">Background</span>)</div></pre></td></tr></table></figure>
<ul>
<li>æ›´æ¨èä½ ä½¿ç”¨å·²æœ‰çš„ QOS ç®¡ç†å¤šçº¿ç¨‹é—®é¢˜ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹ç­‰çº§æ›´æ˜ç¡®çš„æ–¹æ¡ˆã€‚å³ä¾¿æ˜¯åˆ›å»ºè‡ªå·±çš„ GCD æˆ‘ä¹Ÿå»ºè®®ç›´æ¥ä½¿ç”¨ SerialDispatchQueueScheduler ï¼Œæ¯•ç«Ÿè‡ªå·±å†å»å®ç°é‚£äº›åè®®å¾ˆéº»çƒ¦ä¸æ˜¯å—</li>
</ul>
<blockquote>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼åˆ›å»ºè‡ªå·±çš„ GCD ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">public</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(internalSerialQueueName: <span class="type">String</span>, serialQueueConfiguration: ((dispatch_queue_t) -&gt; <span class="type">Void</span>)? = <span class="literal">nil</span>)</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">convenience</span> <span class="keyword">init</span>(queue: dispatch_queue_t, internalSerialQueueName: <span class="type">String</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>MainScheduler æ˜¯ç»§æ‰¿ SerialDispatchQueueScheduler çš„</p>
</blockquote>
<h2 id="ConcurrentDispatchQueueScheduler-å¹¶è¡Œ"><a href="#ConcurrentDispatchQueueScheduler-å¹¶è¡Œ" class="headerlink" title="ConcurrentDispatchQueueScheduler å¹¶è¡Œ"></a>ConcurrentDispatchQueueScheduler å¹¶è¡Œ</h2><blockquote>
<p>åŒæ ·æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªå¹¶è¡Œçš„ Scheduler ï¼šConcurrentDispatchQueueScheduler<br>API çš„ä½¿ç”¨å’Œ SerialDispatchQueueScheduler æ˜¯ä¸€æ ·çš„</p>
</blockquote>
<h2 id="OperationQueueScheduler-å¹¶è¡Œ"><a href="#OperationQueueScheduler-å¹¶è¡Œ" class="headerlink" title="OperationQueueScheduler å¹¶è¡Œ"></a>OperationQueueScheduler å¹¶è¡Œ</h2><blockquote>
<p>ä½¿ç”¨ NSOperationQueue æœ€å¤§çš„å¥½å¤„å°±æ˜¯æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®šåˆ¶æœ€å¤§å¹¶å‘çº¿ç¨‹æ•°é‡ï¼Œå³è®¾ç½® maxConcurrentOperationCount<br>åˆ›å»ºæ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ª NSOperationQueue</p>
</blockquote>
<p>éš¾æ‡‚å•Š</p>
<p><a href="http://t.swift.gg/t/rxswift-course" target="_blank" rel="external">åŸæ–‡</a></p>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/19/RxSwift/Grammar/Operators-è½¬æ¢æ“ä½œç¬¦/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/RxSwift/Grammar/Operators-è½¬æ¢æ“ä½œç¬¦/" itemprop="url">Swift-RxSwift-æ“ä½œ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-19T13:16:33+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="#1.1">â‘ map</a></li>
<li><a href="#1.2">â‘¡flatMap</a></li>
<li><a href="#1.3">â‘¢flatMapLatest</a></li>
<li><a href="#1.4">â‘£scan</a></li>
</ul>
<h1 id="å˜æ¢æ“ä½œ"><a href="#å˜æ¢æ“ä½œ" class="headerlink" title="å˜æ¢æ“ä½œ"></a>å˜æ¢æ“ä½œ</h1><p><span id="1.1">â‘ map </span></p>
<h2 id="â‘ map"><a href="#â‘ map" class="headerlink" title="â‘ map"></a>â‘ map</h2><blockquote>
<p>é€šè¿‡ä½¿ç”¨ä¸€ä¸ªé—­åŒ…å‡½æ•°å°†åŸæ¥çš„Observableåºåˆ—sequenceè½¬æ¢ä¸ºä¸€ä¸ªæ–°çš„Observableåºåˆ—sequence</p>
</blockquote>
<p><img src="http://ot0mms4k8.bkt.clouddn.com/map-001.png" alt="map"></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</div><div class="line">			.<span class="built_in">map</span>(&#123;</div><div class="line">			      <span class="keyword">return</span> <span class="number">10</span> * $<span class="number">0</span></div><div class="line">			     &#125;)</div><div class="line">			.subscribe(&#123;<span class="built_in">print</span>($<span class="number">0</span>)&#125;)</div><div class="line">			.disposed(by: disposeBag)</div><div class="line"></div><div class="line"><span class="comment">//æ‰“å°</span></div><div class="line">next(<span class="number">10</span>)</div><div class="line">next(<span class="number">20</span>)</div><div class="line">next(<span class="number">30</span>)</div><div class="line">completed</div></pre></td></tr></table></figure>
<p><span id="1.2">â‘¡flatMap </span></p>
<h2 id="â‘¡flatMap"><a href="#â‘¡flatMap" class="headerlink" title="â‘¡flatMap"></a>â‘¡flatMap</h2><blockquote>
<p>å°†ä¸€ä¸ªsequenceè½¬æ¢ä¸ºä¸€ä¸ªsequencesï¼Œå½“ä½ æ¥æ”¶ä¸€ä¸ªsequenceçš„äº‹ä»¶ï¼Œä½ è¿˜æƒ³æ¥æ”¶å…¶ä»–sequenceå‘å‡ºçš„äº‹ä»¶çš„è¯å¯ä»¥ä½¿ç”¨flatMapï¼Œå¥¹ä¼šå°†æ¯ä¸€ä¸ªsequenceäº‹ä»¶è¿›è¡Œå¤„ç†ä»¥åï¼Œç„¶åå†ä»¥ä¸€ä¸ªsequenceå½¢å¼å‘å‡ºäº‹ä»¶<br>è€Œä¸”flatMapæœ‰ä¸€æ¬¡æ‹†åŒ…åŠ¨ä½œ<br>å°†ä¸€ä¸ªObservableåºåˆ—è½¬æ¢ä¸ºå¦ä¸€ä¸ªObservableåºåˆ—ï¼Œå¹¶ä¸”åˆå¹¶ä¸¤ä¸ªObservableåºåˆ—ã€‚ä¼šæŒ‰æ—¶é—´é¡ºåºæ¥æ”¶ä¸¤ä¸ªåºåˆ—å‘å‡ºçš„å…ƒç´ </p>
</blockquote>
<p><img src="" alt="flatMap"></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">sttuct <span class="type">Player</span>&#123;</div><div class="line">  <span class="keyword">var</span> score: <span class="type">Variable</span>&lt;<span class="type">Int</span>&gt; <span class="comment">//é‡Œé¢æ˜¯ä¸€ä¸ªVariable</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> ğŸ‘¦ğŸ» = <span class="type">Player</span>(score: <span class="type">Variable</span>(<span class="number">80</span>))      </div><div class="line"><span class="keyword">let</span> ğŸ‘§ğŸ¼ = <span class="type">Player</span>(score: <span class="type">Variable</span>(<span class="number">90</span>))</div><div class="line"><span class="keyword">let</span> ğŸ˜‚ = <span class="type">Player</span>(score: <span class="type">Variable</span>(<span class="number">550</span>))</div><div class="line"><span class="keyword">let</span> player = <span class="type">Variable</span>(ğŸ‘¦ğŸ»)  <span class="comment">//å°†playerè½¬ä¸ºVariable</span></div><div class="line">player.asObservable()       <span class="comment">//æ‹†ç®±è½¬æˆå¯è¢«ç›‘å¬çš„sequence</span></div><div class="line">     .flatMap &#123;</div><div class="line">              $<span class="number">0</span>.score.asObservable() </div><div class="line">             &#125; <span class="comment">// flatMapæœ‰ä¸€æ¬¡æ‹†åŒ…åŠ¨ä½œï¼Œ$0æœ¬æ¥åº”è¯¥æ˜¯ä¸€ä¸ªBehaviorSubjectç±»å‹ï¼Œä½†æ˜¯ç›´æ¥è®¿é—®äº†scoreã€‚æ‰€ä»¥çŒœæƒ³flatMapå¯¹behaviorSubjectè¿›è¡Œäº†onNextæ‹†åŒ…å–æ•°æ®</span></div><div class="line">    .subscribe(onNext: &#123; </div><div class="line">                <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">               &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    ğŸ‘¦ğŸ».score.value = <span class="number">85</span></div><div class="line">	player.value = ğŸ‘§ğŸ¼ <span class="comment">//æ›´æ¢äº†valueï¼Œç›¸å½“äºåˆæ·»åŠ äº†ä¸€ä¸ªsequenceï¼Œä¸¤ä¸ªsequenceéƒ½å¯ä»¥æ¥æ”¶</span></div><div class="line">	ğŸ‘¦ğŸ».score.value = <span class="number">95</span></div><div class="line">	ğŸ‘¦ğŸ».score.value = <span class="number">222</span></div><div class="line">	player.value = ğŸ˜‚</div><div class="line">	    </div><div class="line">	ğŸ‘§ğŸ¼.score.value = <span class="number">100</span></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line">	<span class="number">80</span></div><div class="line">	<span class="number">85</span></div><div class="line">	<span class="number">90</span></div><div class="line">	<span class="number">95</span></div><div class="line">	<span class="number">222</span></div><div class="line">	<span class="number">550</span></div><div class="line">	<span class="number">100</span></div></pre></td></tr></table></figure>
<p><span id="1.3">â‘¢flatMapLatest </span></p>
<h2 id="â‘¢flatMapLatest"><a href="#â‘¢flatMapLatest" class="headerlink" title="â‘¢flatMapLatest"></a>â‘¢flatMapLatest</h2><blockquote>
<p>flatMapLateståªä¼šæ¥æ”¶æœ€æ–°çš„valueäº‹ä»¶ï¼Œå°†ä¸Šä¾‹æ”¹ä¸ºflatMapLatestã€‚ç»“æœä¸º</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="number">80</span></div><div class="line"><span class="number">85</span></div><div class="line"><span class="number">90</span></div><div class="line"><span class="number">550</span></div></pre></td></tr></table></figure>
<p><span id="1.4">â‘£scan </span></p>
<h2 id="â‘£scan"><a href="#â‘£scan" class="headerlink" title="â‘£scan"></a>â‘£scan</h2><blockquote>
<p>scanå°±æ˜¯ç»™ä¸€ä¸ªåˆå§‹åŒ–çš„æ•°ï¼Œç„¶åä¸æ–­çš„æ‹¿å‰ä¸€ä¸ªç»“æœå’Œæœ€æ–°çš„å€¼è¿›è¡Œå¤„ç†æ“ä½œ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.of(<span class="number">10</span>,<span class="number">100</span>,<span class="number">1000</span>)</div><div class="line">         .scan(<span class="number">1</span>)&#123;aggregateValue, newValue <span class="keyword">in</span></div><div class="line">    aggregateValue + newValue&#125;</div><div class="line">         .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">         .addDisposableTo(disposeBag)</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="number">11</span></div><div class="line"><span class="number">111</span></div><div class="line"><span class="number">1111</span></div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/19/RxSwift/Grammar/Operators-è”åˆæ“ä½œObservableæµ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/RxSwift/Grammar/Operators-è”åˆæ“ä½œObservableæµ/" itemprop="url">Swift-RxSwift-Combination Operators-è”åˆæ“ä½œObservableæµ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-19T13:13:56+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="#1">è”åˆæ“ä½œObservableæµ</a></li>
<li><a href="#1.1">â‘ startWith</a></li>
<li><a href="#â‘¡merge">â‘¡merge</a></li>
<li><a href="#1.3">â‘¢zip</a></li>
<li><a href="#1.4">â‘£combineLatest</a></li>
<li><a href="#1.5">â‘¤switchLatest</a></li>
</ul>
<p><span id="1">è”åˆæ“ä½œObservableæµ</span></p>
<h1 id="è”åˆæ“ä½œObservableæµ"><a href="#è”åˆæ“ä½œObservableæµ" class="headerlink" title="è”åˆæ“ä½œObservableæµ"></a>è”åˆæ“ä½œObservableæµ</h1><blockquote>
<p>è”åˆæ“ä½œå°±æ˜¯æŠŠå¤šä¸ª<strong>Observableæµ</strong>åˆæˆ<strong>å•ä¸ªObservableæµ</strong></p>
</blockquote>
<ul>
<li>â‘ startWith (ä¼˜å…ˆæ’å…¥ç‰¹å®šçš„äº‹ä»¶æ¶ˆæ¯)</li>
<li>â‘¡merge ï¼ˆç»„åˆæˆå•ä¸ªObservable,å¹¶ä¸”æŒ‰ç…§æ—¶é—´é¡ºåºå‘å°„å¯¹åº”äº‹ä»¶ï¼‰</li>
<li>â‘¢zip ï¼ˆä¸€ä¸ªäº‹ä»¶å¯¹åº”å¦ä¸€ä¸ªæµä¸€ä¸ªäº‹ä»¶ï¼‰</li>
<li>â‘£combineLatest ï¼ˆä¸€ä¸ªæµçš„äº‹ä»¶å¯¹åº”å¦ä¸€ä¸ªæµçš„æœ€æ–°çš„äº‹ä»¶ï¼‰</li>
<li>â‘¤switchLatest (äº‹ä»¶æµè¿›è¡Œè½¬æ¢)</li>
</ul>
<p><span id="1.1">â‘ startWith</span></p>
<h2 id="â‘ startWith"><a href="#â‘ startWith" class="headerlink" title="â‘ startWith"></a>â‘ startWith</h2><blockquote>
<p>åœ¨å‘å‡ºäº‹ä»¶æ¶ˆæ¯ä¹‹å‰ï¼Œå…ˆå‘å‡ºæŸä¸ªç‰¹å®šçš„äº‹ä»¶æ¶ˆæ¯ã€‚<br>æ¯”å¦‚å‘å‡ºäº‹ä»¶2 ï¼Œ3ç„¶åæˆ‘startWith(1)ï¼Œé‚£ä¹ˆå°±ä¼šå…ˆå‘å‡º1ï¼Œç„¶å2 ï¼Œ3</p>
</blockquote>
<p><img src="http://ozr735s7e.bkt.clouddn.com/startWith.png" alt="startWith"></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="type">Observable</span>.of(<span class="string">"2"</span>,<span class="string">"3"</span>)</div><div class="line">         .startWith(<span class="string">"1"</span>)</div><div class="line">         .subscribe(onNext:&#123;</div><div class="line">                      <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">                      &#125;)</div><div class="line">         .addDisposableTo(disposeBag)</div><div class="line"><span class="comment">//</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨Observableé‡Šæ”¾å…ƒç´ ä¹‹å‰ï¼Œå‘å°„æŒ‡å®šçš„å…ƒç´ åºåˆ—<br>startWithå’Œæ ˆç±»ä¼¼ï¼Œå…ˆè¿›åå‡º<br>åœ¨å‘é€ä¸€ä¸ªä¸œè¥¿å‰ï¼Œå…ˆå‘é€ä¸€ä¸ªæŒ‡å®šçš„</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">let disposeBag = DisposeBag()</div><div class="line">Observable.of([&quot;C&quot;,&quot;C++&quot;,&quot;OC&quot;])</div><div class="line">          .startWith([&quot;ä»Šæ™šåƒé¸¡ï¼Œå¤§å‰å¤§åˆ©&quot;])</div><div class="line">          .subscribe(&#123; (event) in</div><div class="line">                 print(event)</div><div class="line">            &#125;)</div><div class="line">          .disposed(by: disposeBag)</div><div class="line">//æ‰“å°</div><div class="line">next([&quot;ä»Šæ™šåƒé¸¡ï¼Œå¤§å‰å¤§åˆ©&quot;])</div><div class="line">next([&quot;C&quot;, &quot;C++&quot;, &quot;OC&quot;])</div><div class="line">completed</div></pre></td></tr></table></figure>
<p><span id="1.2">â‘¡merge</span></p>
<h2 id="â‘¡merge"><a href="#â‘¡merge" class="headerlink" title="â‘¡merge"></a>â‘¡merge</h2><blockquote>
<p>å°†å¤šä¸ªObservableç»„åˆæˆå•ä¸ªObservable,å¹¶ä¸”æŒ‰ç…§æ—¶é—´é¡ºåºå‘å°„å¯¹åº”äº‹ä»¶</p>
</blockquote>
<p><img src="http://ozr735s7e.bkt.clouddn.com/merge.png" alt="merge"></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">let</span> sbj1 = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> sbj2 = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="type">Observable</span>.of(sbj1,sbj2)</div><div class="line">          .merge()</div><div class="line">          .subscribe(onNext: &#123; </div><div class="line">                    <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">               &#125;)</div><div class="line">          .addDisposableTo(disposeBag)</div><div class="line">subject1.onNext(<span class="string">"ğŸ…°ï¸"</span>)</div><div class="line">subject1.onNext(<span class="string">"ğŸ…±ï¸"</span>)</div><div class="line">subject2.onNext(<span class="string">"â‘ "</span>)</div><div class="line">subject2.onNext(<span class="string">"â‘¡"</span>)</div><div class="line">subject1.onNext(<span class="string">"ğŸ†"</span>)</div><div class="line">subject2.onNext(<span class="string">"â‘¢"</span>)</div><div class="line">   </div><div class="line"><span class="comment">//</span></div><div class="line">ğŸ…°ï¸</div><div class="line">ğŸ…±ï¸</div><div class="line">â‘ </div><div class="line">â‘¡</div><div class="line">ğŸ†</div><div class="line">â‘¢</div></pre></td></tr></table></figure>
<p><span id="1.3">â‘¢zip</span></p>
<h2 id="â‘¢zip"><a href="#â‘¢zip" class="headerlink" title="â‘¢zip"></a>â‘¢zip</h2><blockquote>
<p>ç»‘å®šè¶…è¿‡æœ€å¤šä¸è¶…è¿‡8ä¸ªçš„Observableæµï¼Œç»“åˆåœ¨ä¸€èµ·å¤„ç†<br>æ³¨æ„Zipæ˜¯ä¸€ä¸ªäº‹ä»¶å¯¹åº”å¦ä¸€ä¸ªæµä¸€ä¸ªäº‹ä»¶<br>å°†å¤šä¸ªObservable(æ³¨æ„ï¼šå¿…é¡»æ˜¯è¦æˆå¯¹)ç»„åˆæˆå•ä¸ªObservableï¼Œå½“æœ‰äº‹ä»¶åˆ°è¾¾æ—¶ï¼Œä¼šåœ¨æ¯ä¸ªåºåˆ—ä¸­å¯¹åº”çš„ç´¢å¼•ä¸Šå¯¹åº”çš„å…ƒç´ å‘å‡ºã€‚(ps:ä¹‹å‰ç‰ˆæœ¬çš„RxSwiftå¥½åƒæœ€å¤šåªèƒ½ç»„åˆ8ä¸ªObservable)</p>
</blockquote>
<p><a href="http://reactivex.io/documentation/operators/zip.html" target="_blank" rel="external">zip-æ–‡æ¡£</a></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"> </div><div class="line"><span class="keyword">let</span> strSbj = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> intSbj = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line">   </div><div class="line"><span class="type">Observable</span>.<span class="built_in">zip</span>(strSbj, intSbj)&#123;</div><div class="line">				  strElement,intElement  <span class="keyword">in</span> </div><div class="line">				  <span class="string">"\(strElement) \(intElement)"</span></div><div class="line">				 &#125;</div><div class="line">         .subscribe(<span class="type">OnNext</span>: &#123;</div><div class="line">                   pint($<span class="number">0</span>)</div><div class="line">              &#125;)</div><div class="line">         .addDisposableTo(disposeBag)</div><div class="line">   </div><div class="line">strSbj.onNext(<span class="string">"ğŸ…°ï¸"</span>)</div><div class="line">strSbj.onNext(<span class="string">"ğŸ…±ï¸"</span>)</div><div class="line">   </div><div class="line">intSbj.onNext(<span class="number">1</span>)</div><div class="line">intSbj.onNext(<span class="number">2</span>)</div><div class="line">   </div><div class="line">strSbj.onNext(<span class="string">"ğŸ†"</span>)</div><div class="line">intSbj.onNext(<span class="number">2</span>)</div><div class="line">   </div><div class="line"><span class="comment">//</span></div><div class="line">ğŸ…°ï¸ <span class="number">1</span>   å°†stringSubjectå’ŒintSubjectå‹ç¼©åˆ°ä¸€èµ·å…±åŒå¤„ç†</div><div class="line">ğŸ…±ï¸ <span class="number">2</span></div><div class="line">ğŸ† <span class="number">3</span></div></pre></td></tr></table></figure>
<p><span id="1.4">â‘£combineLatest</span></p>
<h2 id="â‘£combineLatest"><a href="#â‘£combineLatest" class="headerlink" title="â‘£combineLatest"></a>â‘£combineLatest</h2><blockquote>
<p>ç»‘å®šè¶…è¿‡æœ€å¤šä¸è¶…è¿‡8ä¸ªçš„Observableæµï¼Œç»“åˆåœ¨ä¸€èµ·å¤„ç†<br>å’ŒZipä¸åŒçš„æ˜¯combineLatestæ˜¯ä¸€ä¸ªæµçš„äº‹ä»¶å¯¹åº”å¦ä¸€ä¸ªæµçš„æœ€æ–°çš„äº‹ä»¶ï¼Œä¸¤ä¸ªäº‹ä»¶éƒ½ä¼šæ˜¯æœ€æ–°çš„äº‹ä»¶ï¼Œå¯å°†ä¸‹å›¾ä¸Zipçš„å›¾è¿›è¡Œå¯¹æ¯”<br>é‚»è¿‘äº‹ä»¶ä¸€èµ·å¤„ç†</p>
</blockquote>
<p><img src="http://ozr735s7e.bkt.clouddn.com/combineLatest.png" alt="combineLatest"></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"><span class="keyword">let</span> strSbj = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> intSbj = <span class="type">PublishSubject</span>&lt;<span class="type">Int</span>&gt;()</div><div class="line">   </div><div class="line"><span class="type">Observable</span>.combineLatest(strSbj, intSbj)&#123; strElement,intElement <span class="keyword">in</span></div><div class="line">                     <span class="string">"\(strElement) \(intElement)"</span></div><div class="line">              &#125;</div><div class="line">         .addscribe(onNext: &#123;<span class="built_in">print</span>(</div><div class="line">                   $<span class="number">0</span>)</div><div class="line">                 &#125;)</div><div class="line">         .addDisposableTo(disposeBag)</div><div class="line">   </div><div class="line">strSbj.onNext(<span class="string">"ğŸ…°ï¸"</span>)</div><div class="line">strSbj.onNext(<span class="string">"ğŸ…±ï¸"</span>)</div><div class="line">intSbj.onNext(<span class="number">1</span>)</div><div class="line">intSbj.onNext(<span class="number">2</span>)</div><div class="line">strSbj.onNext(<span class="string">"ğŸ†"</span>)</div><div class="line"></div><div class="line"><span class="comment">// è¾“å‡º</span></div><div class="line">ğŸ…±ï¸ <span class="number">1</span></div><div class="line">ğŸ…±ï¸ <span class="number">2</span></div><div class="line">ğŸ† <span class="number">2</span></div></pre></td></tr></table></figure>
<blockquote>
<p>å½“ä¸€ä¸ªé¡¹ç›®ç”±ä¸¤ä¸ªObservableså‘å°„æ—¶ï¼Œé€šè¿‡ä¸€ä¸ªæŒ‡å®šçš„åŠŸèƒ½å°†æ¯ä¸ªObservableè§‚å¯Ÿåˆ°çš„æœ€æ–°é¡¹ç›®ç»„åˆèµ·æ¥ï¼Œå¹¶æ ¹æ®è¯¥åŠŸèƒ½çš„ç»“æœå‘å°„äº‹ä»¶</p>
</blockquote>
<p><img src="http://ot0mms4k8.bkt.clouddn.com/Combination-Operators-4-2.png" alt=""></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"></div><div class="line"><span class="keyword">let</span> subject1 = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">let</span> subject2 = <span class="type">PublishSubject</span>&lt;<span class="type">String</span>&gt;()</div><div class="line">	    </div><div class="line"><span class="type">Observable</span>.combineLatest(subject1, subject2) &#123; string1,string2 <span class="keyword">in</span></div><div class="line">                <span class="string">"\(string1)--\(string2)"</span></div><div class="line">              &#125;</div><div class="line">		    .subscribe(onNext: &#123;</div><div class="line">		            <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">		            &#125;)</div><div class="line">		    .disposed(by: disposeBag)</div><div class="line">	    </div><div class="line">subject1.onNext(<span class="string">"A"</span>)</div><div class="line">    </div><div class="line">subject2.onNext(<span class="string">"1"</span>)</div><div class="line">subject2.onNext(<span class="string">"2"</span>)</div><div class="line">    </div><div class="line">subject1.onNext(<span class="string">"B"</span>)</div><div class="line">subject1.onNext(<span class="string">"C"</span>)</div><div class="line">	</div><div class="line"><span class="comment">//è¾“å‡ºç»“æœ</span></div><div class="line"><span class="type">A</span>--<span class="number">1</span></div><div class="line"><span class="type">A</span>--<span class="number">2</span></div><div class="line"><span class="type">B</span>--<span class="number">2</span></div><div class="line"><span class="type">C</span>--<span class="number">2</span></div></pre></td></tr></table></figure>
<p><span id="1.5">â‘¤switchLatest</span></p>
<h2 id="â‘¤switchLatest"><a href="#â‘¤switchLatest" class="headerlink" title="â‘¤switchLatest"></a>â‘¤switchLatest</h2><blockquote>
<p>åˆ‡æ¢Observableé˜Ÿåˆ—<br>switchLatestå¯ä»¥å¯¹äº‹ä»¶æµè¿›è¡Œè½¬æ¢ï¼Œæœ¬æ¥ç›‘å¬çš„sbj1ï¼Œå¯ä»¥é€šè¿‡æ›´æ”¹variableé‡Œé¢çš„valueæ›´æ¢äº‹ä»¶æºâ€”&gt;å˜æˆç›‘å¬sbj2</p>
</blockquote>
<p><img src="http://ozr735s7e.bkt.clouddn.com/switchLatest.png" alt="hexo"></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"></div><div class="line"><span class="keyword">let</span> sbj1 = <span class="type">BehaviorSubject</span>(value: <span class="string">"âš½ï¸"</span>)</div><div class="line"><span class="keyword">let</span> sbj2 = <span class="type">BehaviorSubject</span>(value: <span class="string">"ğŸ"</span>)</div><div class="line">   </div><div class="line"><span class="keyword">let</span> variable = <span class="type">Variable</span>(sbj1)</div><div class="line">variable.asObservable()</div><div class="line">        .switchLatest()</div><div class="line">        .subscribe(onNext: &#123; </div><div class="line">                     <span class="built_in">print</span>($<span class="number">0</span>) </div><div class="line">                 &#125;)</div><div class="line">        .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">sbj1.onNext(<span class="string">"ğŸˆ"</span>)</div><div class="line">sbj1.onNext(<span class="string">"ğŸ€"</span>)</div><div class="line">	    </div><div class="line">variable.value = sbj1</div><div class="line">	    </div><div class="line">subject1.onNext(<span class="string">"âš¾ï¸"</span>)</div><div class="line">	    </div><div class="line">sbj2.onNext(<span class="string">"ğŸ"</span>)</div><div class="line">variable.value = sbj1</div><div class="line">sbj2.onNext(<span class="string">"54321"</span>)</div><div class="line">sbj1.onNext(<span class="string">"12345"</span>)</div><div class="line">   <span class="comment">///</span></div><div class="line">âš½ï¸</div><div class="line">ğŸˆ</div><div class="line">ğŸ€</div><div class="line">ğŸ</div><div class="line">ğŸ</div><div class="line">âš¾ï¸</div><div class="line"><span class="number">12345</span></div></pre></td></tr></table></figure>
<blockquote>
<p>ä¾‹å­åˆ†æ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"> et disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">    </div><div class="line"><span class="keyword">let</span> subject1 = <span class="type">BehaviorSubject</span>(value: <span class="string">"1"</span>)</div><div class="line"><span class="keyword">let</span> subject2 = <span class="type">BehaviorSubject</span>(value: <span class="string">"A"</span>)</div><div class="line">    </div><div class="line"><span class="keyword">let</span> variable = <span class="type">Variable</span>(subject1)</div><div class="line">    </div><div class="line">variable.asObservable()</div><div class="line">        .switchLatest()</div><div class="line">        .subscribe(onNext: &#123; <span class="built_in">print</span>($<span class="number">0</span>) &#125;)</div><div class="line">        .disposed(by: disposeBag)</div><div class="line">    </div><div class="line">subject1.onNext(<span class="string">"2"</span>)</div><div class="line">subject1.onNext(<span class="string">"3"</span>)</div><div class="line">    </div><div class="line">variable.value = subject2</div><div class="line">    </div><div class="line">subject1.onNext(<span class="string">"4"</span>)</div><div class="line">subject2.onNext(<span class="string">"B"</span>)</div><div class="line"></div><div class="line"><span class="comment">//æ‰“å°ç»“æœ</span></div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="type">A</span></div><div class="line"><span class="type">B</span></div></pre></td></tr></table></figure>
<p><img src="http://ot0mms4k8.bkt.clouddn.com/switchLatest-002.png" alt=""></p>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/18/RxSwift/Grammar/è¿›é˜¶ç†è§£/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/18/RxSwift/Grammar/è¿›é˜¶ç†è§£/" itemprop="url">Swift-RxSwift-è¿›é˜¶ç†è§£</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-18T13:32:21+08:00">
                2017-12-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Disposing"><a href="#Disposing" class="headerlink" title="Disposing"></a>Disposing</h1><p>   å½“ç›‘å¬ä¸€ä¸ªäº‹ä»¶åºåˆ—çš„æ—¶å€™ï¼Œæœ‰æ¶ˆæ¯äº‹ä»¶æ¥äº†ï¼Œæˆ‘ä»¬åšæŸäº›äº‹æƒ…<br>   ä½†æ˜¯è¿™ä¸ªäº‹ä»¶åºåˆ—ä¸å†å‘å‡ºæ¶ˆæ¯äº†ï¼Œæˆ‘ä»¬çš„ç›‘å¬ä¹Ÿå°±æ²¡æœ‰ä»€ä¹ˆå­˜åœ¨ä»·å€¼äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡Šæ”¾æˆ‘ä»¬è¿™äº›ç›‘å¬èµ„æºï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ¯ç§ç¼–ç¨‹è¯­è¨€ä¸­çš„å†…å­˜èµ„æºé‡Šæ”¾<br>   OCå’ŒSwiftä¸­ä¹Ÿä¸€æ ·ï¼Œåœ¨ä½ ä¸éœ€è¦ç”¨æŸäº›å˜é‡çš„æ—¶å€™ï¼Œä½ éœ€è¦æŠŠè¿™äº›å˜é‡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´é‡Šæ”¾æ‰</p>
<blockquote>
<p>é‡Šæ”¾æŸä¸€ä¸ªç›‘å¬çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è°ƒç”¨é‡Šæ”¾æ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªè²Œä¼¼ä¸€èˆ¬ä¸å¸¸ç”¨ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// å…³äºschedulerï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹é¢è®²åˆ°</span></div><div class="line"><span class="keyword">let</span> subscription = <span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.interval(<span class="number">0.3</span>, scheduler: <span class="type">SerialDispatchQueueScheduler</span>.<span class="keyword">init</span>(internalSerialQueueName: <span class="string">"test"</span>))</div><div class="line">    .observeOn(<span class="type">MainScheduler</span>.instance)	<span class="comment">//observeOnä¹Ÿä¼šåœ¨ä¸‹é¢è®²åˆ°</span></div><div class="line">    .subscribe &#123; event <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(event)</div><div class="line">&#125;</div><div class="line">    </div><div class="line"><span class="type">Thread</span>.sleep(forTimeInterval: <span class="number">2.0</span>)</div><div class="line">    </div><div class="line">subscription.dispose()</div><div class="line"></div><div class="line">	<span class="comment">//</span></div><div class="line">	next(<span class="number">0</span>)</div><div class="line">	next(<span class="number">1</span>)</div><div class="line">	next(<span class="number">2</span>)</div><div class="line">	next(<span class="number">3</span>)</div><div class="line">	next(<span class="number">4</span>)</div><div class="line">	next(<span class="number">5</span>)</div></pre></td></tr></table></figure>
<p>æ¯”å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªsubscriptionç›‘å¬ï¼Œåœ¨ä¸¤ç§’ä»¥åæˆ‘ä»¬ä¸éœ€è¦äº†ï¼Œæ‰‹åŠ¨è°ƒç”¨dispose()æ–¹æ³•ï¼Œå°±èƒ½é‡Šæ”¾ç›‘å¬èµ„æºï¼Œä¸å†æ‰“å°ä¿¡æ¯ã€‚ä¸Šé¢çš„subscriptionä¸ä¼¦æ˜¯åœ¨å“ªä¸ªçº¿ç¨‹ä¸­ç›‘å¬ï¼Œå°±ç®—åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨çš„dispose()æ–¹æ³•ä¸€æ ·ä¼šé”€æ¯èµ„æº</p>
<h1 id="Dispose-Bag"><a href="#Dispose-Bag" class="headerlink" title="Dispose Bag"></a>Dispose Bag</h1><p>è¿˜æœ‰ä¸€ç§æ˜¯è‡ªåŠ¨çš„æ–¹å¼ï¼Œæ¨èå¤§å®¶ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å°±å¥½åƒiOSä¸­çš„ARCæ–¹å¼ä¼¼å¾—ï¼Œä¼šè‡ªåŠ¨å»é‡Šæ”¾èµ„æº</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line">   </div><div class="line"><span class="type">Observable</span>&lt;<span class="type">Int</span>&gt;.empty()</div><div class="line">   .subscribe &#123; event <span class="keyword">in</span></div><div class="line">       <span class="built_in">print</span>(event)</div><div class="line">   &#125;</div><div class="line">   .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªdisposeBagæ¥ç››æ”¾æˆ‘ä»¬éœ€è¦ç®¡ç†çš„èµ„æºï¼Œç„¶åæŠŠæ–°å»ºçš„ç›‘å¬éƒ½æ”¾è¿›å»ï¼Œä¼šåœ¨é€‚å½“çš„æ—¶å€™é”€æ¯è¿™äº›èµ„æºã€‚å¦‚æœä½ éœ€è¦ç«‹å³é‡Šæ”¾èµ„æºåªéœ€è¦æ–°å»ºä¸€ä¸ªDisposeBag()ï¼Œé‚£ä¹ˆä¸Šä¸€ä¸ªDisposeBagå°±ä¼šè¢«é”€æ¯</p>
<h1 id="observeOn-å’ŒsubscribeOn"><a href="#observeOn-å’ŒsubscribeOn" class="headerlink" title="observeOn()å’ŒsubscribeOn()"></a>observeOn()å’ŒsubscribeOn()</h1><p>åŒºåˆ«å…¶å®æˆ‘æ„Ÿè§‰å…¶å®å°±ä¸€å¥è¯ï¼ŒsubscribeOn()è®¾ç½®èµ·ç‚¹åœ¨å“ªä¸ªçº¿ç¨‹ï¼ŒobserveOn()è®¾ç½®äº†åç»­å·¥ä½œåœ¨å“ªä¸ªçº¿ç¨‹</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">someObservable </div><div class="line"> .doOneThing() â‘ </div><div class="line"> .observeOn(<span class="type">MainRouteScheduler</span>.instance) â‘¡</div><div class="line"> .subscribeOn(<span class="type">OtherScheduler</span>.instance) â‘¢</div><div class="line"> .subscribeNext &#123; â‘£</div><div class="line"> 	......</div><div class="line"> &#125;</div><div class="line"> .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p> â‘  æ‰€æœ‰åŠ¨ä½œéƒ½å‘ç”Ÿåœ¨å½“å‰çš„é»˜è®¤çº¿ç¨‹<br> â‘¡ observeOnè½¬æ¢çº¿ç¨‹åˆ°ä¸»çº¿ç¨‹ï¼Œä¸‹é¢æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­<br> â‘¢ subscribeOnè§„å®šåŠ¨ä½œä¸€å¼€å§‹ä¸æ˜¯å‘ç”Ÿåœ¨é»˜è®¤çº¿ç¨‹äº†ï¼Œè€Œæ˜¯åœ¨OtherScheduleräº†<br> â‘£ å¦‚æœæˆ‘ä»¬ä¹‹å‰æ²¡æœ‰è°ƒç”¨observeOnï¼Œé‚£ä¹ˆè¿™è¾¹ä¼šåœ¨OtherSchedulerå‘ç”Ÿï¼Œä½†æ˜¯æˆ‘ä»¬å‰é¢è°ƒç”¨äº†observeOnï¼Œæ‰€ä»¥è¿™ä¸ªåŠ¨ä½œä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨</p>
<ul>
<li>subscribeOnåªæ˜¯å½±å“äº‹ä»¶é“¾å¼€å§‹é»˜è®¤çš„çº¿ç¨‹ï¼Œè€ŒobserveOnè§„å®šäº†ä¸‹ä¸€æ­¥åŠ¨ä½œå‘ç”Ÿåœ¨å“ªä¸ªçº¿ç¨‹ä¸­</li>
</ul>
<h1 id="shareReplay"><a href="#shareReplay" class="headerlink" title="shareReplay"></a>shareReplay</h1><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> testReplay = <span class="type">Observable</span>.just(<span class="string">"ğŸ˜‚"</span>)</div><div class="line">    .<span class="built_in">map</span> &#123;  <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    </div><div class="line">testReplay</div><div class="line">    .subscribe &#123; event <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(event)</div><div class="line">&#125;.addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">testReplay</div><div class="line">    .subscribe &#123; event <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(event)</div><div class="line">&#125;.addDisposableTo(disposeBag)</div><div class="line"></div><div class="line"><span class="comment">///</span></div><div class="line">   ğŸ˜‚</div><div class="line">	next(())</div><div class="line">	completed</div><div class="line">	ğŸ˜‚</div><div class="line">	next(())</div><div class="line">	completed</div></pre></td></tr></table></figure>
<p>å¤§å®¶å‘ç°æ²¡ï¼Œmapå‡½æ•°æ‰§è¡Œäº†ä¸¤éï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä¸éœ€è¦mapå‡½æ•°é‡Œçš„ä¸œè¥¿æ‰§è¡Œä¸¤éï¼Œæ¯”å¦‚mapå‡½æ•°é‡Œé¢å¦‚æœæ‰§è¡Œçš„æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œæˆ‘åªéœ€è¦ä¸€æ¬¡è¯·æ±‚ç»“æœä¾›å¤§å®¶ä½¿ç”¨å°±è¡Œäº†ï¼Œå¤šä½™çš„è¯·æ±‚æ²¡å•¥ç”¨ï¼Œæµªè´¹æ—¶é—´ã€‚æ‰€ä»¥è¿™æ—¶å€™å°±éœ€è¦shareReplay(1)äº†ã€‚è¿™é‡Œé¢çš„æ•°å­—ä¸€èˆ¬éƒ½æ˜¯1ï¼Œåªæ‰§è¡Œä¸€æ¬¡ã€‚ä½ å¯ä»¥æ”¹ä¸º2ï¼Œ3çœ‹çœ‹ç»“æœæœ‰å•¥ä¸åŒå“¦ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> testReplay = <span class="type">Observable</span>.just(<span class="string">"ğŸ˜‚"</span>)</div><div class="line">    .<span class="built_in">map</span> &#123;  <span class="built_in">print</span>($<span class="number">0</span>) &#125;</div><div class="line">    .shareReplay(<span class="number">1</span>)</div><div class="line">    </div><div class="line">testReplay</div><div class="line">    .subscribe &#123; event <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(event)</div><div class="line">&#125;.addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">testReplay</div><div class="line">    .subscribe &#123; event <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(event)</div><div class="line">&#125;.addDisposableTo(disposeBag)</div><div class="line"></div><div class="line"><span class="comment">///</span></div><div class="line">  ğŸ˜‚ <span class="comment">//åªæ‰§è¡Œäº†ä¸€æ¬¡</span></div><div class="line">  next(())</div><div class="line">  completed</div><div class="line">  next(())</div><div class="line">  completed</div></pre></td></tr></table></figure>
<h1 id="è‡ªå®šä¹‰operator"><a href="#è‡ªå®šä¹‰operator" class="headerlink" title="è‡ªå®šä¹‰operator"></a>è‡ªå®šä¹‰operator</h1><p>   è‡ªå®šä¹‰æ“ä½œç¬¦å¾ˆç®€å•ï¼Œå®˜æ–¹æ¨èå°½é‡ç”¨æ ‡å‡†çš„æ“ä½œç¬¦ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„æ“ä½œç¬¦ï¼Œæ–‡æ¡£ä¸Šè¯´æœ‰ä¸¤ç§æ–¹æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬åªè¯´ä¸€ä¸‹æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹æ³•</p>
<blockquote>
<p>è‡ªå®šä¹‰ä¸€ä¸ªmapæ“ä½œç¬¦</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="class"><span class="keyword">extension</span> <span class="title">ObservableType</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">myMap</span>&lt;R&gt;<span class="params">(transform: E -&gt; R)</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">R</span>&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">Observable</span>.create &#123; observer <span class="keyword">in</span></div><div class="line">            <span class="keyword">let</span> subscription = <span class="keyword">self</span>.subscribe &#123; e <span class="keyword">in</span></div><div class="line">                    <span class="keyword">switch</span> e &#123;</div><div class="line">                    <span class="keyword">case</span> .next(<span class="keyword">let</span> value):</div><div class="line">                        <span class="keyword">let</span> result = transform(value)</div><div class="line">                        observer.on(.next(result))</div><div class="line">                    <span class="keyword">case</span> .error(<span class="keyword">let</span> error):</div><div class="line">                        observer.on(.error(error))</div><div class="line">                    <span class="keyword">case</span> .completed:</div><div class="line">                        observer.on(.completed)</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            <span class="keyword">return</span> subscription</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>å‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå…¶ä¸­é—­åŒ…å‚æ•°æ˜¯Eç±»å‹è¿”å›å€¼æ˜¯Rç±»å‹ï¼Œmapå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªObservableç±»å‹</p>
</blockquote>
<h1 id="Driver"><a href="#Driver" class="headerlink" title="Driver"></a>Driver</h1><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> results = query.rx.text</div><div class="line">    .throttle(<span class="number">0.3</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .flatMapLatest &#123; query <span class="keyword">in</span></div><div class="line">        fetchAutoCompleteItems(query)</div><div class="line">    &#125;</div><div class="line">results</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="string">"\($0.count)"</span> &#125;</div><div class="line">    .bindTo(resultCount.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">results</div><div class="line">    .bindTo(resultsTableView.rx.items(cellIdentifier: <span class="string">"Cell"</span>)) &#123; (<span class="number">_</span>, result, cell) <span class="keyword">in</span></div><div class="line">        cell.textLabel?.text = <span class="string">"\(result)"</span></div><div class="line">    &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<ul>
<li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªå¯ç›‘å¬åºåˆ—resultsï¼Œå…¶ä¸­flatMapLatestæ€ä¹ˆç”¨æˆ‘ä»¬ä¸‹é¢è®²</li>
<li>ç„¶åå°†resultsç»‘å®šåˆ°resultCount.rx.textä¸Š</li>
<li>å°†resultsç»‘å®šåˆ°resultsTableViewä¸Š</li>
</ul>
<blockquote>
<p>ä¸Šé¢ç¨‹åºä¼šæœ‰ä¸‹é¢å‡ ä¸ªå¼‚å¸¸æƒ…å†µ</p>
</blockquote>
<ul>
<li>å¦‚æœä¸Šé¢fetchAutoCompleteItemså‡ºé”™äº†ï¼Œé‚£ä¹ˆä»–ç»‘å®šçš„UIå°†ä¸å†æ”¶åˆ°ä»»ä½•äº‹ä»¶æ¶ˆæ¯</li>
<li>å¦‚æœä¸Šé¢fetchAutoCompleteItemsæ˜¯åœ¨åå°æŸä¸ªçº¿ç¨‹ä¸­è¿è¡Œçš„ï¼Œé‚£ä¹ˆäº‹ä»¶ç»‘å®šä¹Ÿæ˜¯å‘ç”Ÿåœ¨åå°æŸä¸ªçº¿ç¨‹ï¼Œè¿™æ ·æ›´æ–°UIçš„æ—¶å€™ä¼šé€ æˆcrash</li>
<li>æœ‰ä¸¤æ¬¡ç»‘å®šfetchAutoCompleteItemsä¼šæ‰§è¡Œä¸¤æ¬¡</li>
</ul>
<p>å½“ç„¶é’ˆå¯¹ä¸Šé¢é—®é¢˜æˆ‘ä»¬ä¹Ÿæœ‰è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¥å™¨shareReplay(1)ä¿è¯ä¸ä¼šæ‰§è¡Œä¸¤æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨observeOn()ä¿è¯åé¢æ‰€æœ‰æ“ä½œåœ¨ä¸»çº¿ç¨‹å®Œæˆ</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> results = query.rx.text</div><div class="line">    .throttle(<span class="number">0.3</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .flatMapLatest &#123; query <span class="keyword">in</span></div><div class="line">        fetchAutoCompleteItems(query)</div><div class="line">            .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">            .catchErrorJustReturn([])           </div><div class="line">    &#125;</div><div class="line">    .shareReplay(<span class="number">1</span>)                             </div><div class="line">results</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="string">"\($0.count)"</span> &#125;</div><div class="line">    .bindTo(resultCount.rx.text)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">results</div><div class="line">    .bindTo(resultTableView.rx.items(cellIdentifier: <span class="string">"Cell"</span>)) &#123; (<span class="number">_</span>, result, cell) <span class="keyword">in</span></div><div class="line">        cell.textLabel?.text = <span class="string">"\(result)"</span></div><div class="line">    &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ä½†æ˜¯,ä¹Ÿå¯ä»¥ä½¿ç”¨Driver</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="keyword">let</span> results = query.rx.text.asDriver()	<span class="comment">//è½¬æ¢æˆä¸€ä¸ªDriveråºåˆ—</span></div><div class="line">    .throttle(<span class="number">0.3</span>, scheduler: <span class="type">MainScheduler</span>.instance)</div><div class="line">    .flatMapLatest &#123; query <span class="keyword">in</span></div><div class="line">        fetchAutoCompleteItems(query)</div><div class="line">            .asDriver(onErrorJustReturn: [])  <span class="comment">//å½“é‡è§é”™è¯¯éœ€è¦è¿”å›ä»€ä¹ˆ</span></div><div class="line">    &#125;	<span class="comment">//ä¸éœ€è¦æ·»åŠ shareReplay(1)</span></div><div class="line">results</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="string">"\($0.count)"</span> &#125;</div><div class="line">    .drive(resultCount.rx.text)	<span class="comment">//å’ŒbingTo()åŠŸèƒ½ä¸€æ ·</span></div><div class="line">    .addDisposableTo(disposeBag) </div><div class="line">                                             </div><div class="line">results</div><div class="line">    .drive(resultTableView.rx.items(cellIdentifier: <span class="string">"Cell"</span>)) &#123; (<span class="number">_</span>, result, cell) <span class="keyword">in</span></div><div class="line">        cell.textLabel?.text = <span class="string">"\(result)"</span></div><div class="line">    &#125;</div><div class="line">    .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>driveæ–¹æ³•åªèƒ½åœ¨Driveråºåˆ—ä¸­ä½¿ç”¨ï¼ŒDriveræœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š<br>â‘  Driveråºåˆ—ä¸å…è®¸å‘å‡ºerror<br>â‘¡ Driveråºåˆ—çš„ç›‘å¬åªä¼šåœ¨ä¸»çº¿ç¨‹ä¸­<br>æ‰€ä»¥Driveræ˜¯è½¬ä¸ºUIç»‘å®šé‡èº«æ‰“é€ çš„ä¸œè¥¿ã€‚ä»¥ä¸‹æƒ…å†µä½ å¯ä»¥ä½¿ç”¨Driveræ›¿æ¢BindTo:</p>
</blockquote>
<ul>
<li>ä¸èƒ½å‘å‡ºerror</li>
<li>åœ¨ä¸»çº¿ç¨‹ä¸­ç›‘å¬</li>
<li>å…±äº«äº‹ä»¶æµ</li>
</ul>
<h1 id="mapå’ŒflatMapä½•æ—¶ä½¿ç”¨"><a href="#mapå’ŒflatMapä½•æ—¶ä½¿ç”¨" class="headerlink" title="mapå’ŒflatMapä½•æ—¶ä½¿ç”¨"></a>mapå’ŒflatMapä½•æ—¶ä½¿ç”¨</h1><p>å®˜æ–¹Demoçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè¿·æƒ‘ä¸ºå•¥æœ‰çš„åœ°æ–¹ä½¿ç”¨flatMapLatestä¸ºå•¥æœ‰äº›åœ°æ–¹ä½¿ç”¨mapå‘¢ï¼Ÿæ¯”å¦‚ä¸Šé¢é‚£ä¸ªDriveræ‰€ç”¨çš„ä¾‹å­</p>
<blockquote>
<p>mapå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªRç±»å‹çš„åºåˆ—ï¼Œè¿”å›ä¸€ä¸ªRç±»å‹çš„åºåˆ—ï¼Œè¿˜æ˜¯åŸæ¥çš„åºåˆ—</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">map</span>&lt;R&gt;<span class="params">(<span class="number">_</span> transform: @escaping <span class="params">(<span class="keyword">Self</span>.E)</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">R</span>) -&gt; <span class="type">RxSwift</span>.<span class="type">Observable</span>&lt;<span class="type">R</span>&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>flatMapå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªOç±»å‹çš„åºåˆ—ï¼Œè¿”å›ä¸€ä¸ªO.Eç±»å‹çš„åºåˆ—ï¼Œä¹Ÿå°±æ˜¯æœ‰åŸæ¥åºåˆ—é‡Œå…ƒç´ ç»„æˆçš„æ–°åºåˆ—</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">flatMap</span>&lt;O : ObservableConvertibleType&gt;<span class="params">(<span class="number">_</span> selector: @escaping <span class="params">(<span class="keyword">Self</span>.E)</span></span></span> <span class="keyword">throws</span> -&gt; <span class="type">O</span>) -&gt; <span class="type">RxSwift</span>.<span class="type">Observable</span>&lt;<span class="type">O</span>.<span class="type">E</span>&gt;</div></pre></td></tr></table></figure>
<p>å…¶å®è¿™é‡Œçš„mapå’ŒflatMapåœ¨swiftä¸­çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ã€‚mapå‡½æ•°å¯ä»¥å¯¹åŸæœ‰åºåˆ—é‡Œé¢çš„äº‹ä»¶å…ƒç´ è¿›è¡Œæ”¹é€ ï¼Œè¿”å›çš„è¿˜æ˜¯åŸæ¥çš„åºåˆ—ã€‚è€ŒflatMapå¯¹åŸæœ‰åºåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ”¹é€ å’Œå¤„ç†ï¼Œæ¯ä¸€ä¸ªå…ƒç´ è¿”å›ä¸€ä¸ªæ–°çš„sequenceï¼Œç„¶åæŠŠæ¯ä¸€ä¸ªå…ƒç´ å¯¹åº”çš„sequenceåˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„sequenceåºåˆ—</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> test = <span class="type">Observable</span>.of(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>)</div><div class="line">    .<span class="built_in">map</span> &#123; $<span class="number">0</span> + <span class="string">"TTF"</span> &#125;</div><div class="line">    </div><div class="line">test</div><div class="line">    .subscribe(onNext: &#123;</div><div class="line">        <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">    &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line">    </div><div class="line">1TTF</div><div class="line">2TTF</div><div class="line">3TTF</div><div class="line">4TTF</div><div class="line">5TTF</div></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨mapå¯¹åºåˆ—ä¸­æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œäº†å¤„ç†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œè€Œä½¿ç”¨flatMapéœ€è¦è¿”å›çš„åºåˆ—ã€‚é‚£ä¹ˆä½¿ç”¨mapä¹Ÿè¿”å›ä¸€ä¸ªåºåˆ—çœ‹çœ‹</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> test = <span class="type">Observable</span>.of(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>)</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="type">Observable</span>.just($<span class="number">0</span>) &#125;</div><div class="line">test</div><div class="line">    .subscribe(onNext: &#123;</div><div class="line">        <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">    &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line"><span class="type">RxSwift</span>.<span class="type">Just</span>&lt;<span class="type">Swift</span>.<span class="type">String</span>&gt;</div><div class="line"><span class="type">RxSwift</span>.<span class="type">Just</span>&lt;<span class="type">Swift</span>.<span class="type">String</span>&gt;</div><div class="line"><span class="type">RxSwift</span>.<span class="type">Just</span>&lt;<span class="type">Swift</span>.<span class="type">String</span>&gt;</div><div class="line"><span class="type">RxSwift</span>.<span class="type">Just</span>&lt;<span class="type">Swift</span>.<span class="type">String</span>&gt;</div><div class="line"><span class="type">RxSwift</span>.<span class="type">Just</span>&lt;<span class="type">Swift</span>.<span class="type">String</span>&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>çœ‹åˆ°ç»“æœä¼šæ‰“å°å‡ºæ¯ä¸€ä¸ªåºåˆ—ï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨merge()æ–¹æ³•å°†è¿™å‡ ä¸ªåºåˆ—è¿›è¡Œåˆå¹¶</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> test = <span class="type">Observable</span>.of(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>)</div><div class="line">    .<span class="built_in">map</span> &#123; <span class="type">Observable</span>.just($<span class="number">0</span>) &#125;</div><div class="line">    .merge()</div><div class="line">    </div><div class="line">test</div><div class="line">    .subscribe(onNext: &#123;</div><div class="line">        <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">    &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line"> <span class="comment">///</span></div><div class="line">  <span class="number">1</span></div><div class="line">  <span class="number">2</span></div><div class="line">  <span class="number">3</span></div><div class="line">  <span class="number">4</span></div><div class="line">  <span class="number">5</span></div></pre></td></tr></table></figure>
<blockquote>
<p>åˆå¹¶ä¸ºä¸€ä¸ªæ–°åºåˆ—åæˆ‘ä»¬å°±å¯ä»¥æ­£å¸¸æ‰“å°å…ƒç´ äº†ã€‚ä¸‹é¢çœ‹çœ‹ä½¿ç”¨faltMap()å‡½æ•°å¹²è¿™ä»¶äº‹</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="keyword">let</span> test = <span class="type">Observable</span>.of(<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>)</div><div class="line">    .flatMap &#123; <span class="type">Observable</span>.just($<span class="number">0</span>) &#125;</div><div class="line">    </div><div class="line">test</div><div class="line">    .subscribe(onNext: &#123;</div><div class="line">        <span class="built_in">print</span>($<span class="number">0</span>)</div><div class="line">    &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">    </div><div class="line"><span class="number">1</span></div><div class="line"><span class="number">2</span></div><div class="line"><span class="number">3</span></div><div class="line"><span class="number">4</span></div><div class="line"><span class="number">5</span></div></pre></td></tr></table></figure>
<blockquote>
<p>çœ‹ä¸‹å¯¹æ¯”æ˜¯ä¸æ˜¯ä¸€æ ·ï¼Œè¿™æ ·å­å¯¹æ¯”å°±æ¸…æ™°äº†å§</p>
</blockquote>
<ul>
<li>mapå‡½æ•°åªèƒ½è¿”å›åŸæ¥çš„é‚£ä¸€ä¸ªåºåˆ—ï¼Œé‡Œé¢çš„å‚æ•°çš„è¿”å›å€¼è¢«å½“åšåŸæ¥åºåˆ—ä¸­æ‰€å¯¹åº”çš„å…ƒç´ ã€‚</li>
<li>flatMapå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„åºåˆ—ï¼Œå°†åŸæ¥å…ƒç´ è¿›è¡Œäº†å¤„ç†ï¼Œè¿”å›è¿™äº›å¤„ç†åçš„å…ƒç´ ç»„æˆçš„æ–°åºåˆ—</li>
<li>mapå‡½æ•° + åˆå¹¶å‡½æ•° = flatMapå‡½æ•°</li>
</ul>
<blockquote>
<p>flatMapå‡½æ•°åœ¨å®é™…åº”ç”¨ä¸­æœ‰å¾ˆå¤šåœ°æ–¹éœ€è¦ç”¨åˆ°ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚ï¼Œç½‘ç»œè¯·æ±‚å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªè¯·æ±‚è¿‡ç¨‹è¿›è¡Œç›‘å¬ï¼Œç„¶åå¤„ç†é”™è¯¯ã€‚åªè¦ç»§ç»­ä»–è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„åºåˆ—</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">validatedUsername = input.username</div><div class="line">          .flatMapLatest &#123; username <span class="keyword">in</span></div><div class="line">              <span class="keyword">return</span> validationService.validateUsername(username)</div><div class="line">                  .observeOn(<span class="type">MainScheduler</span>.instance)</div><div class="line">                  .catchErrorJustReturn(.failed(message: <span class="string">"Error contacting server"</span>))</div><div class="line">          &#125;</div><div class="line">          .shareReplay(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>flatMapLatestå…¶å®å°±æ˜¯flatMapçš„å¦ä¸€ä¸ªæ–¹å¼ï¼Œåªå‘é€æœ€åä¸€ä¸ªåˆè¿›æ¥çš„åºåˆ—äº‹ä»¶ã€‚ä¸Šé¢è®¤è¯usernameæ˜¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªè¿‡ç¨‹è¿›è¡Œå¤„ç†<br>è¿™ä¸ªpasswordä¸éœ€è¦åå°è”ç½‘è®¤è¯ï¼Œåªéœ€è¦è¿”å›passwordç¬¦åˆä¸ç¬¦åˆè¦æ±‚å°±è¡Œäº†ï¼Œè¿˜æ˜¯åŸæ¥çš„åºåˆ—å°±è¡Œäº†</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">validatedPassword = input.password</div><div class="line">  .<span class="built_in">map</span> &#123; password <span class="keyword">in</span></div><div class="line">      <span class="keyword">return</span> validationService.validatePassword(password)</div><div class="line">  &#125;</div><div class="line">  .shareReplay(<span class="number">1</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>flatMapä¹Ÿè§£å†³äº†å†…åµŒå¤šä¸ªsubscribeçš„é—®é¢˜ï¼Œå®˜æ–¹ä¸å»ºè®®å†…åµŒå¤šä¸ªsubscribeã€‚æ¯”å¦‚ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   textField.rx_text.subscribe(onNext: &#123; text <span class="keyword">in</span></div><div class="line">    performURLRequest(text).subscribe(onNext: &#123; result <span class="keyword">in</span></div><div class="line">        ...</div><div class="line">    &#125;)</div><div class="line">    .addDisposableTo(disposeBag)</div><div class="line">&#125;)</div><div class="line">.addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>æ”¹å†™ä¸ºflatMap</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">textField.rx_text</div><div class="line"> .flatMapLatest &#123; text <span class="keyword">in</span></div><div class="line">     <span class="keyword">return</span> performURLRequest(text) <span class="comment">//å› ä¸ºflatMapè¿”å›ä¸€ä¸ªæ–°çš„sequence</span></div><div class="line"> &#125;</div><div class="line"> ...</div><div class="line"> .addDisposableTo(disposeBag)</div></pre></td></tr></table></figure>
<p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬ç½‘ç»œè¯·æ±‚å¾—åˆ°jsonæ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨flatmapè¿›è¡Œåºåˆ—è½¬æ¢ï¼Œè§£ææˆModelåºåˆ—ï¼Œç„¶åæˆ‘ä»¬è®¢é˜…è¿™ä¸ªå¸¦æœ‰Modelçš„åºåˆ—ï¼Œä»£ç å°±ä¼šå˜å¾—å¾ˆä¼˜é›…</p>
<h1 id="UIBindingObserver"><a href="#UIBindingObserver" class="headerlink" title="UIBindingObserver"></a>UIBindingObserver</h1><blockquote>
<p>UIBindingObserverè¿™ä¸ªä¸œè¥¿å¾ˆæœ‰ç”¨çš„ï¼Œåˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„ç›‘å¬è€…ï¼Œæœ‰æ—¶å€™RxCocoa(RxSwiftzä¸­å¯¹UIKitçš„ä¸€ä¸ªæ‰©å±•åº“)ç»™çš„æ‰©å±•ä¸å¤Ÿæˆ‘ä»¬ä½¿ç”¨ï¼Œæ¯”å¦‚ä¸€ä¸ªUITextFieldæœ‰ä¸ªisEnabledå±æ€§ï¼Œæˆ‘æƒ³æŠŠè¿™ä¸ªisEnabledå˜ä¸ºä¸€ä¸ªobserverï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Reactive</span> <span class="title">where</span> <span class="title">Base</span>: <span class="title">UITextField</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> inputEnabled: <span class="type">UIBindingObserver</span>&lt;<span class="type">Base</span>, <span class="type">Result</span>&gt; &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">UIBindingObserver</span>(<span class="type">UIElement</span>: base) &#123; textFiled, result <span class="keyword">in</span></div><div class="line">            textFiled.isEnabled = result.isValid</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>UIBindingObserveræ˜¯ä¸€ä¸ªç±»ï¼Œä»–çš„åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå…ƒç´ æœ¬èº«ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…å‚æ•°æ˜¯å…ƒç´ æœ¬èº«ï¼Œè¿˜æœ‰ä»–çš„ä¸€ä¸ªæ€§</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">init</span>(<span class="type">UIElement</span>: <span class="type">UIElementType</span>, binding: @escaping (<span class="type">UIElementType</span>, <span class="type">Value</span>) -&gt; <span class="type">Swift</span>.<span class="type">Void</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>è‡ªå®šä¹‰äº†ä¸€ä¸ªinputEnabled Observeré‡Œé¢å…³è”çš„UITextFieldçš„isEnabledå±æ€§</p>
</blockquote>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/15/RxSwift/Grammar/ç®€å•åŸºç¡€é¡¹ç›®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/15/RxSwift/Grammar/ç®€å•åŸºç¡€é¡¹ç›®/" itemprop="url">Swift-RxSwift-ç®€å•åŸºç¡€é¡¹ç›®</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-15T23:40:29+08:00">
                2017-12-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h1><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">â”œâ”€â”€ <span class="type">Controller</span></div><div class="line">â”‚   â””â”€â”€ <span class="type">LXFViewController</span>.swift     <span class="comment">// ä¸»è§†å›¾æ§åˆ¶å™¨</span></div><div class="line">â”‚</div><div class="line">â”œâ”€â”€ <span class="type">Extension</span></div><div class="line">â”‚   â””â”€â”€ <span class="type">Response</span>+<span class="type">ObjectMapper</span>.swift <span class="comment">// Responseåˆ†ç±»ï¼Œ</span></div><div class="line"><span class="type">Moya</span>è¯·æ±‚å®Œè¿›è¡Œ<span class="type">Json</span>è½¬æ¨¡å‹æˆ–æ¨¡å‹æ•°ç»„</div><div class="line">â”‚</div><div class="line">â”œâ”€â”€ <span class="type">Model</span></div><div class="line">â”‚   â””â”€â”€ <span class="type">LXFModel</span>.swift              <span class="comment">// æ¨¡å‹</span></div><div class="line">â”‚</div><div class="line">â”œâ”€â”€ <span class="type">Protocol</span></div><div class="line">â”‚   â””â”€â”€ <span class="type">LXFViewModelType</span>.swift      <span class="comment">// å®šä¹‰äº†æ¨¡å‹åè®®</span></div><div class="line">â”‚</div><div class="line">â”œâ”€â”€ <span class="type">Tool</span></div><div class="line">â”‚   â”œâ”€â”€ <span class="type">LXFNetworkTool</span>.swift        <span class="comment">// å°è£…Moyaè¯·æ±‚</span></div><div class="line">â”‚   â”‚</div><div class="line">â”‚   â””â”€â”€ <span class="type">LXFProgressHUD</span>.swift        <span class="comment">// å°è£…çš„HUD</span></div><div class="line">â”‚</div><div class="line">â”œâ”€â”€ <span class="type">View</span></div><div class="line">â”‚   â”œâ”€â”€ <span class="type">LXFViewCell</span>.swift           <span class="comment">// è‡ªå®šä¹‰cell</span></div><div class="line">â”‚   â”‚</div><div class="line">â”‚   â””â”€â”€ <span class="type">LXFViewCell</span>.xib             <span class="comment">// cellçš„xibæ–‡ä»¶</span></div><div class="line">â”‚</div><div class="line">â””â”€â”€ <span class="type">ViewModel</span></div><div class="line">    â”‚</div><div class="line">    â””â”€â”€ <span class="type">LXFViewModel</span>.swift          <span class="comment">// è§†å›¾æ¨¡å‹</span></div></pre></td></tr></table></figure>
<h1 id="Lib"><a href="#Lib" class="headerlink" title="Lib"></a>Lib</h1><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="type">RxSwift</span>         <span class="comment">// æƒ³ç©RxSwiftçš„å¿…å¤‡åº“</span></div><div class="line"><span class="type">RxCocoa</span>         <span class="comment">// å¯¹ UIKit Foundation è¿›è¡Œ Rx åŒ–</span></div><div class="line"><span class="type">NSObject</span>+<span class="type">Rx</span>     <span class="comment">// ä¸ºæˆ‘ä»¬æä¾› rx_disposeBag </span></div><div class="line"><span class="type">Moya</span>/<span class="type">RxSwift</span>    <span class="comment">// ä¸ºRxSwiftä¸“ç”¨æä¾›ï¼Œå¯¹Alamofireè¿›è¡Œå°è£…çš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“</span></div><div class="line"><span class="type">ObjectMapper</span>    <span class="comment">// Jsonè½¬æ¨¡å‹ä¹‹å¿…å¤‡è‰¯å“</span></div><div class="line"><span class="type">RxDataSources</span>   <span class="comment">// å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„ä½¿ç”¨tableViewçš„æ•°æ®æºæ–¹æ³•</span></div><div class="line"><span class="type">Then</span>            <span class="comment">// æä¾›å¿«é€Ÿåˆå§‹åŒ–çš„è¯­æ³•ç³–</span></div><div class="line"><span class="type">Kingfisher</span>      <span class="comment">// å›¾ç‰‡åŠ è½½åº“</span></div><div class="line"><span class="type">SnapKit</span>         <span class="comment">// è§†å›¾çº¦æŸåº“</span></div><div class="line"><span class="type">Reusable</span>        <span class="comment">// å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„ä½¿ç”¨è‡ªå®šä¹‰cellå’Œview,ä¸å†å‡ºç°Optional</span></div><div class="line"><span class="type">MJRefresh</span>       <span class="comment">// ä¸Šæ‹‰åŠ è½½ã€ä¸‹æ‹‰åˆ·æ–°çš„åº“</span></div><div class="line"><span class="type">SVProgressHUD</span>   <span class="comment">// ç®€å•æ˜“ç”¨çš„HUD</span></div></pre></td></tr></table></figure>
<h1 id="Moyaçš„ä½¿ç”¨"><a href="#Moyaçš„ä½¿ç”¨" class="headerlink" title="Moyaçš„ä½¿ç”¨"></a>Moyaçš„ä½¿ç”¨</h1><ul>
<li>Moyaæ˜¯åŸºäºAlamofireçš„ç½‘ç»œè¯·æ±‚åº“</li>
<li>ä½¿ç”¨äº†Moya/Swiftï¼Œå®ƒåœ¨Moyaçš„åŸºç¡€ä¸Šæ·»åŠ äº†å¯¹RxSwiftçš„æ¥å£æ”¯æŒã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´ä¸‹Moyaçš„ä½¿ç”¨</li>
</ul>
<blockquote>
<p>åˆ›å»ºä¸€ä¸ªæšä¸¾ï¼Œç”¨æ¥å­˜æ”¾è¯·æ±‚ç±»å‹ï¼Œè¿™é‡Œæˆ‘é¡ºä¾¿è®¾ç½®ç›¸åº”çš„è·¯å¾„ï¼Œç­‰ä¸‹ç»Ÿä¸€å–å‡ºæ¥ç›´æ¥èµ‹å€¼å³å¯</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="class"><span class="keyword">enum</span> <span class="title">LXFNetworkTool</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">LXFNetworkCategory</span>: <span class="title">String</span> </span>&#123;</div><div class="line">        <span class="keyword">case</span> all     = <span class="string">"all"</span></div><div class="line">        <span class="keyword">case</span> android = <span class="string">"Android"</span></div><div class="line">        <span class="keyword">case</span> ios     = <span class="string">"iOS"</span></div><div class="line">        <span class="keyword">case</span> welfare = <span class="string">"ç¦åˆ©"</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">case</span> data(type: <span class="type">LXFNetworkCategory</span>, size:<span class="type">Int</span>, index:<span class="type">Int</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>ä¸ºè¿™ä¸ªæšä¸¾å†™ä¸€ä¸ªæ‰©å±•ï¼Œå¹¶éµå¾ªå¡„ TargetTypeï¼Œè¿™ä¸ªåè®®çš„Moyaè¿™ä¸ªåº“è§„å®šçš„åè®®ï¼Œå¯ä»¥æŒ‰ä½Commondé”®+å•å‡»å·¦é”®è¿›å…¥ç›¸åº”çš„æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="class"><span class="keyword">extension</span> <span class="title">LXFNetworkTool</span>: <span class="title">TargetType</span> </span>&#123;</div><div class="line">    <span class="comment">/// baseURL ç»Ÿä¸€åŸºæœ¬çš„URL</span></div><div class="line">    <span class="keyword">var</span> baseURL: <span class="type">URL</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">URL</span>(string: <span class="string">"http://gank.io/api/data/"</span>)!</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/// pathå­—æ®µä¼šè¿½åŠ è‡³baseURLåé¢</span></div><div class="line">    <span class="keyword">var</span> path: <span class="type">String</span> &#123;</div><div class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">        <span class="keyword">case</span> .data(<span class="keyword">let</span> type, <span class="keyword">let</span> size, <span class="keyword">let</span> index):</div><div class="line">            <span class="keyword">return</span> <span class="string">"\(type.rawValue)/\(size)/\(index)"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/// HTTPçš„è¯·æ±‚æ–¹å¼</span></div><div class="line">    <span class="keyword">var</span> method: <span class="type">Moya</span>.<span class="type">Method</span> &#123;</div><div class="line">        <span class="keyword">return</span> .<span class="keyword">get</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/// è¯·æ±‚å‚æ•°(ä¼šåœ¨è¯·æ±‚æ—¶è¿›è¡Œç¼–ç )</span></div><div class="line">    <span class="keyword">var</span> parameters: [<span class="type">String</span>: <span class="type">Any</span>]? &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/// å‚æ•°ç¼–ç æ–¹å¼(è¿™é‡Œä½¿ç”¨URLçš„é»˜è®¤æ–¹å¼)</span></div><div class="line">    <span class="keyword">var</span> parameterEncoding: <span class="type">ParameterEncoding</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="type">URLEncoding</span>.<span class="keyword">default</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/// è¿™é‡Œç”¨äºå•å…ƒæµ‹è¯•ï¼Œä¸éœ€è¦çš„å°±åƒæˆ‘ä¸€æ ·éšä¾¿å†™å†™</span></div><div class="line">    <span class="keyword">var</span> sampleData: <span class="type">Data</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"LinXunFeng"</span>.data(using: .utf8)!</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/// å°†è¦è¢«æ‰§è¡Œçš„ä»»åŠ¡(è¯·æ±‚ï¼šrequest ä¸‹è½½ï¼šupload ä¸Šä¼ ï¼šdownload)</span></div><div class="line">    <span class="keyword">var</span> task: <span class="type">Task</span> &#123;</div><div class="line">        <span class="keyword">return</span> .request</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/// æ˜¯å¦æ‰§è¡ŒAlamofireéªŒè¯ï¼Œé»˜è®¤å€¼ä¸ºfalse</span></div><div class="line">    <span class="keyword">var</span> validate: <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ç”¨äºæ•´ä¸ªé¡¹ç›®çš„ç½‘ç»œè¯·æ±‚</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> lxfNetTool = <span class="type">RxMoyaProvider</span>&lt;<span class="type">LXFNetworkTool</span>&gt;()</div></pre></td></tr></table></figure>
<h1 id="RxDataSources"><a href="#RxDataSources" class="headerlink" title="RxDataSources"></a>RxDataSources</h1><blockquote>
<p>å¦‚ä½•ä¼˜é›…çš„æ¥å®ç°tableViewçš„æ•°æ®æºã€‚å…¶å®RxDataSourceså®˜ç½‘ä¸Šå·²ç»æœ‰å¾ˆæ˜ç¡®çš„ä½¿ç”¨è¯´æ˜ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹å§<br>æ¦‚å¿µç‚¹ :RxDataSourcesæ˜¯ä»¥sectionæ¥åšä¸ºæ•°æ®ç»“æ„æ¥ä¼ è¾“ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œå¯èƒ½å¾ˆå¤šåŒå­¦ä¼šæ¯”è¾ƒç–‘æƒ‘è¿™å¥è¯å§ï¼Œæˆ‘åœ¨æ­¤ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¼ ç»Ÿçš„æ•°æ®æºå®ç°çš„æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªnumberOfSectionï¼Œæˆ‘ä»¬åœ¨å¾ˆå¤šæƒ…å†µä¸‹åªéœ€è¦ä¸€ä¸ªsectionï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å¯å®ç°ï¼Œä¹Ÿå¯ä»¥ä¸å®ç°ï¼Œé»˜è®¤è¿”å›çš„å°±æ˜¯1ï¼Œè¿™ç»™æˆ‘ä»¬å¸¦æ¥çš„ä¸€ä¸ªè¿·æƒ‘ç‚¹ï¼šã€tableViewæ˜¯ç”±rowæ¥ç»„æˆçš„ã€‘ï¼Œä¸çŸ¥é“åœ¨åçš„å„ä½ä¸­æœ‰æ²¡æœ‰æ˜¯è¿™ä¹ˆæƒ³çš„å‘¢ï¼Ÿï¼Ÿæœ‰çš„è¯é‚£ä»ä»Šå¤©å¼€å§‹å°±è¦è®¤æ¸…æ¥šè¿™ä¸€ç‚¹ï¼Œã€tableViewå…¶å®æ˜¯ç”±sectionç»„æˆçš„ã€‘ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨RxDataSourcesçš„è¿‡ç¨‹ä¸­ï¼Œå³ä½¿ä½ çš„setionåªæœ‰ä¸€ä¸ªï¼Œé‚£ä½ ä¹Ÿå¾—è¿”å›ä¸€ä¸ªsectionçš„æ•°ç»„å‡ºå»</p>
</blockquote>
<h2 id="è‡ªå®šä¹‰Section"><a href="#è‡ªå®šä¹‰Section" class="headerlink" title="è‡ªå®šä¹‰Section"></a>è‡ªå®šä¹‰Section</h2><blockquote>
<p>åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„Modelä¸­åˆ›å»ºä¸€ä¸ªSectionçš„ç»“æ„ä½“ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ‰©å±•ï¼Œéµå¾ªSectionModelTypeåè®®ï¼Œå®ç°ç›¸åº”çš„åè®®æ–¹æ³•ã€‚çº¦å®šä¿—æˆçš„å†™æ³•å‘¢è¯·å‚è€ƒå¦‚ä¸‹æ–¹å¼</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="type">LXFModel</span>.swift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LXFSection</span> </span>&#123;</div><div class="line">    <span class="comment">// itemså°±æ˜¯rows</span></div><div class="line">    <span class="keyword">var</span> items: [<span class="type">Item</span>]</div><div class="line">    <span class="comment">// ä½ ä¹Ÿå¯ä»¥è¿™é‡ŒåŠ ä½ éœ€è¦çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ headerView çš„ title</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LXFSection</span>: <span class="title">SectionModelType</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// é‡å®šä¹‰ Item çš„ç±»å‹ä¸º LXFModel</span></div><div class="line">    <span class="keyword">typealias</span> <span class="type">Item</span> = <span class="type">LXFModel</span></div><div class="line"></div><div class="line">    <span class="comment">// å®ç°åè®®ä¸­çš„æ–¹å¼</span></div><div class="line">    <span class="keyword">init</span>(original: <span class="type">LXFSection</span>, items: [<span class="type">LXFSection</span>.<span class="type">Item</span>]) &#123;</div><div class="line">        <span class="keyword">self</span> = original</div><div class="line">        <span class="keyword">self</span>.items = items</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åœ¨æ§åˆ¶å™¨ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±æ€§"><a href="#åœ¨æ§åˆ¶å™¨ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±æ€§" class="headerlink" title="åœ¨æ§åˆ¶å™¨ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±æ€§"></a>åœ¨æ§åˆ¶å™¨ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±æ€§</h2><blockquote>
<p>ä»¥ä¸‹ä»£ç å‡åœ¨ LXFViewController.swift æ–‡ä»¶ä¸­</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±æ€§ï¼Œç±»å‹ä¸ºè‡ªå®šä¹‰çš„Sectionç±»å‹</span></div><div class="line"><span class="keyword">let</span> dataSource = <span class="type">RxTableViewSectionedReloadDataSource</span>&lt;<span class="type">LXFSection</span>&gt;()</div></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨æ•°æ®æºå±æ€§ç»‘å®šæˆ‘ä»¬çš„cell"><a href="#ä½¿ç”¨æ•°æ®æºå±æ€§ç»‘å®šæˆ‘ä»¬çš„cell" class="headerlink" title="ä½¿ç”¨æ•°æ®æºå±æ€§ç»‘å®šæˆ‘ä»¬çš„cell"></a>ä½¿ç”¨æ•°æ®æºå±æ€§ç»‘å®šæˆ‘ä»¬çš„cell</h2><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// ç»‘å®šcell</span></div><div class="line">dataSource.configureCell = &#123; ds, tv, ip, item <span class="keyword">in</span></div><div class="line">    <span class="comment">// è¿™ä¸ªåœ°æ–¹ä½¿ç”¨äº†Reusableè¿™ä¸ªåº“ï¼Œåœ¨LXFViewCellä¸­éµå®ˆäº†ç›¸åº”çš„åè®®</span></div><div class="line">    <span class="comment">// ä½¿å…¶æ–¹ä¾¿è½¬æ¢cellä¸ºéå¯é€‰å‹çš„ç›¸åº”çš„cellç±»å‹</span></div><div class="line">    <span class="keyword">let</span> cell = tv.dequeueReusableCell(<span class="keyword">for</span>: ip) <span class="keyword">as</span> <span class="type">LXFViewCell</span></div><div class="line">    cell.picView.kf.setImage(with: <span class="type">URL</span>(string: item.url))</div><div class="line">    cell.descLabel.text = <span class="string">"æè¿°: \(item.desc)"</span></div><div class="line">    cell.sourceLabel.text = <span class="string">"æ¥æº: \(item.source)"</span></div><div class="line">    <span class="keyword">return</span> cell</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å°†sectionsåºåˆ—ç»‘å®šç»™æˆ‘ä»¬çš„rows"><a href="#å°†sectionsåºåˆ—ç»‘å®šç»™æˆ‘ä»¬çš„rows" class="headerlink" title="å°†sectionsåºåˆ—ç»‘å®šç»™æˆ‘ä»¬çš„rows"></a>å°†sectionsåºåˆ—ç»‘å®šç»™æˆ‘ä»¬çš„rows</h2><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">output.sections.asDriver().drive(tableView.rx.items(dataSource:dataSource)).addDisposableTo(rx_disposeBag)</div></pre></td></tr></table></figure>
<h1 id="ViewModelçš„è§„èŒƒ"><a href="#ViewModelçš„è§„èŒƒ" class="headerlink" title="ViewModelçš„è§„èŒƒ"></a>ViewModelçš„è§„èŒƒ</h1><blockquote>
<p>MVVMæ€æƒ³å°±æ˜¯å°†åŸæœ¬åœ¨ViewControllerçš„è§†å›¾æ˜¾ç¤ºé€»è¾‘ã€éªŒè¯é€»è¾‘ã€ç½‘ç»œè¯·æ±‚ç­‰ä»£ç å­˜æ”¾äºViewModelä¸­ï¼Œè®©æˆ‘ä»¬æ‰‹ä¸­çš„ViewControllerç˜¦èº«ã€‚è¿™äº›é€»è¾‘ç”±ViewModelè´Ÿè´£ï¼Œå¤–ç•Œä¸éœ€è¦å…³å¿ƒï¼Œå¤–ç•Œåªéœ€è¦ç»“æœï¼ŒViewModelä¹Ÿåªéœ€è¦å°†ç»“æœç»™åˆ°å¤–ç•Œï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåè®®LXFViewModelType</p>
</blockquote>
<h2 id="åˆ›å»ºä¸€ä¸ªLXFViewModelType-swift"><a href="#åˆ›å»ºä¸€ä¸ªLXFViewModelType-swift" class="headerlink" title="åˆ›å»ºä¸€ä¸ªLXFViewModelType.swift"></a>åˆ›å»ºä¸€ä¸ªLXFViewModelType.swift</h2><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="type">LXFViewModelType</span>.swift</div><div class="line"></div><div class="line"><span class="comment">// associatedtype å…³é”®å­— ç”¨æ¥å£°æ˜ä¸€ä¸ªç±»å‹çš„å ä½ç¬¦ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†</span></div><div class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">LXFViewModelType</span> </span>&#123;</div><div class="line">    associatedtype <span class="type">Input</span></div><div class="line">    associatedtype <span class="type">Output</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">transform</span><span class="params">(input: Input)</span></span> -&gt; <span class="type">Output</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="viewModeléµå®ˆLXFViewModelTypeåè®®"><a href="#viewModeléµå®ˆLXFViewModelTypeåè®®" class="headerlink" title="viewModeléµå®ˆLXFViewModelTypeåè®®"></a>viewModeléµå®ˆLXFViewModelTypeåè®®</h2><ul>
<li>å¯ä»¥ä¸ºXFViewModelTypeçš„Inputå’ŒOutputå®šä¹‰åˆ«åï¼Œä»¥ç¤ºåŒºåˆ†ï¼Œå¦‚ï¼šä½ è¿™ä¸ªviewModelçš„ç”¨äºè¯·æ±‚é¦–é¡µæ¨¡å—ç›¸å…³è”çš„ï¼Œåˆ™å¯ä»¥å‘½åä¸ºï¼šHomeInput å’Œ HomeOutput</li>
<li>å¯ä»¥ä¸°å¯Œæˆ‘ä»¬çš„ Input å’Œ Output ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä¸ºOutputæ·»åŠ äº†ä¸€ä¸ªåºåˆ—ï¼Œç±»å‹ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„LXFSectionæ•°ç»„ï¼Œåœ¨Inputé‡Œé¢æ·»åŠ äº†ä¸€ä¸ªè¯·æ±‚ç±»å‹(å³è¦è¯·æ±‚ä»€ä¹ˆæ•°æ®ï¼Œæ¯”å¦‚é¦–é¡µçš„æ•°æ®)</li>
<li>é€šè¿‡ transform æ–¹æ³•å°†inputæºå¸¦çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆäº†ä¸€ä¸ªOutput</li>
</ul>
<blockquote>
<p>ä»¥ä¸‹ä»£ç ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œè¿›è¡Œäº†éƒ¨åˆ†åˆ å‡</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="type">LXFViewModel</span>.swift</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LXFViewModel</span>: <span class="title">LXFViewModelType</span> </span>&#123;</div><div class="line">   <span class="comment">// å­˜æ”¾ç€è§£æå®Œæˆçš„æ¨¡å‹æ•°ç»„</span></div><div class="line">   <span class="keyword">let</span> models = <span class="type">Variable</span>&lt;[<span class="type">LXFModel</span>]&gt;([])</div><div class="line"></div><div class="line">    <span class="comment">// ä¸ºLXFViewModelTypeçš„Inputå’ŒOutputå®šä¹‰åˆ«å</span></div><div class="line">    <span class="keyword">typealias</span> <span class="type">Input</span> = <span class="type">LXFInput</span></div><div class="line">    <span class="keyword">typealias</span> <span class="type">Output</span> = <span class="type">LXFOutput</span></div><div class="line"></div><div class="line">    <span class="comment">// ä¸°å¯Œæˆ‘ä»¬çš„Inputå’ŒOutput</span></div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">LXFInput</span> </span>&#123;</div><div class="line">        <span class="comment">// ç½‘ç»œè¯·æ±‚ç±»å‹</span></div><div class="line">        <span class="keyword">let</span> category: <span class="type">LXFNetworkTool</span>.<span class="type">LXFNetworkCategory</span></div><div class="line"></div><div class="line">        <span class="keyword">init</span>(category: <span class="type">LXFNetworkTool</span>.<span class="type">LXFNetworkCategory</span>) &#123;</div><div class="line">            <span class="keyword">self</span>.category = category</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">LXFOutput</span> </span>&#123;</div><div class="line">        <span class="comment">// tableViewçš„sectionsæ•°æ®</span></div><div class="line">        <span class="keyword">let</span> sections: <span class="type">Driver</span>&lt;[<span class="type">LXFSection</span>]&gt;</div><div class="line"></div><div class="line">        <span class="keyword">init</span>(sections: <span class="type">Driver</span>&lt;[<span class="type">LXFSection</span>]&gt;) &#123;</div><div class="line">            <span class="keyword">self</span>.sections = sections</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">transform</span><span class="params">(input: LXFViewModel.LXFInput)</span></span> -&gt; <span class="type">LXFViewModel</span>.<span class="type">LXFOutput</span> &#123;</div><div class="line">        <span class="keyword">let</span> sections = models.asObservable().<span class="built_in">map</span> &#123; (models) -&gt; [<span class="type">LXFSection</span>] <span class="keyword">in</span></div><div class="line">            <span class="comment">// å½“modelsçš„å€¼è¢«æ”¹å˜æ—¶ä¼šè°ƒç”¨ï¼Œè¿™æ˜¯Variableçš„ç‰¹æ€§</span></div><div class="line">            <span class="keyword">return</span> [<span class="type">LXFSection</span>(items: models)] <span class="comment">// è¿”å›sectionæ•°ç»„</span></div><div class="line">        &#125;.asDriver(onErrorJustReturn: [])</div><div class="line"></div><div class="line">        <span class="keyword">let</span> output = <span class="type">LXFOutput</span>(sections: sections)</div><div class="line"></div><div class="line">        <span class="comment">// æ¥ä¸‹æ¥çš„ä»£ç æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œè¯·ç»“åˆé¡¹ç›®æŸ¥çœ‹ï¼Œä¸ç„¶ä¼šä¸æ–¹ä¾¿é˜…è¯»å’Œç†è§£</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨ViewControllerä¸­åˆå§‹åŒ–æˆ‘ä»¬çš„inputï¼Œé€šè¿‡transformå¾—åˆ°outputï¼Œç„¶åå°†æˆ‘ä»¬outputä¸­çš„sectionsåºåˆ—ç»‘å®štableViewçš„items</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="type">LXFViewController</span>.swift</div><div class="line"></div><div class="line"><span class="comment">// åˆå§‹åŒ–input</span></div><div class="line"><span class="keyword">let</span> vmInput = <span class="type">LXFViewModel</span>.<span class="type">LXFInput</span>(category: .welfare)</div><div class="line"><span class="comment">// é€šè¿‡transformå¾—åˆ°output</span></div><div class="line"><span class="keyword">let</span> vmOutput = viewModel.transform(input: vmInput)</div><div class="line"></div><div class="line">vmOutput.sections.asDriver().drive(tableView.rx.items(dataSource: dataSource)).addDisposableTo(rx_disposeBag)</div></pre></td></tr></table></figure>
<h1 id="RxSwiftä¸­ä½¿ç”¨MJRefresh"><a href="#RxSwiftä¸­ä½¿ç”¨MJRefresh" class="headerlink" title="RxSwiftä¸­ä½¿ç”¨MJRefresh"></a>RxSwiftä¸­ä½¿ç”¨MJRefresh</h1><h2 id="å®šä¹‰ä¸€ä¸ªæšä¸¾LXFRefreshStatusï¼Œç”¨äºæ ‡å¿—å½“å‰åˆ·æ–°çŠ¶æ€"><a href="#å®šä¹‰ä¸€ä¸ªæšä¸¾LXFRefreshStatusï¼Œç”¨äºæ ‡å¿—å½“å‰åˆ·æ–°çŠ¶æ€" class="headerlink" title="å®šä¹‰ä¸€ä¸ªæšä¸¾LXFRefreshStatusï¼Œç”¨äºæ ‡å¿—å½“å‰åˆ·æ–°çŠ¶æ€"></a>å®šä¹‰ä¸€ä¸ªæšä¸¾LXFRefreshStatusï¼Œç”¨äºæ ‡å¿—å½“å‰åˆ·æ–°çŠ¶æ€</h2><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="class"><span class="keyword">enum</span> <span class="title">LXFRefreshStatus</span> </span>&#123;</div><div class="line">    <span class="keyword">case</span> <span class="keyword">none</span></div><div class="line">    <span class="keyword">case</span> beingHeaderRefresh</div><div class="line">    <span class="keyword">case</span> endHeaderRefresh</div><div class="line">    <span class="keyword">case</span> beingFooterRefresh</div><div class="line">    <span class="keyword">case</span> endFooterRefresh</div><div class="line">    <span class="keyword">case</span> noMoreData</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="åœ¨LXFOutputæ·»åŠ ä¸€ä¸ªrefreshStatusåºåˆ—ï¼Œç±»å‹ä¸ºLXFRefreshStatus"><a href="#åœ¨LXFOutputæ·»åŠ ä¸€ä¸ªrefreshStatusåºåˆ—ï¼Œç±»å‹ä¸ºLXFRefreshStatus" class="headerlink" title="åœ¨LXFOutputæ·»åŠ ä¸€ä¸ªrefreshStatusåºåˆ—ï¼Œç±»å‹ä¸ºLXFRefreshStatus"></a>åœ¨LXFOutputæ·»åŠ ä¸€ä¸ªrefreshStatusåºåˆ—ï¼Œç±»å‹ä¸ºLXFRefreshStatus</h2><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// ç»™å¤–ç•Œè®¢é˜…ï¼Œå‘Šè¯‰å¤–ç•Œçš„tableViewå½“å‰çš„åˆ·æ–°çŠ¶æ€</span></div><div class="line"><span class="keyword">let</span> refreshStatus = <span class="type">Variable</span>&lt;<span class="type">LXFRefreshStatus</span>&gt;(.<span class="keyword">none</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚å¹¶å¾—åˆ°ç»“æœä¹‹åï¼Œä¿®æ”¹refreshStatusçš„valueä¸ºç›¸åº”çš„LXFRefreshStatusé¡¹</p>
</blockquote>
<h2 id="å¤–ç•Œè®¢é˜…outputçš„refreshStatus"><a href="#å¤–ç•Œè®¢é˜…outputçš„refreshStatus" class="headerlink" title="å¤–ç•Œè®¢é˜…outputçš„refreshStatus"></a>å¤–ç•Œè®¢é˜…outputçš„refreshStatus</h2><blockquote>
<p>å¤–ç•Œè®¢é˜…outputçš„refreshStatusï¼Œå¹¶ä¸”æ ¹æ®æ¥æ”¶åˆ°çš„å€¼è¿›è¡Œç›¸åº”çš„æ“ä½œ</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   vmOutput.refreshStatus.asObservable().subscribe(onNext: &#123;[<span class="keyword">weak</span> <span class="keyword">self</span>] status <span class="keyword">in</span></div><div class="line">    <span class="keyword">switch</span> status &#123;</div><div class="line">    <span class="keyword">case</span> .beingHeaderRefresh:</div><div class="line">        <span class="keyword">self</span>?.tableView.mj_header.beginRefreshing()</div><div class="line">    <span class="keyword">case</span> .endHeaderRefresh:</div><div class="line">        <span class="keyword">self</span>?.tableView.mj_header.endRefreshing()</div><div class="line">    <span class="keyword">case</span> .beingFooterRefresh:</div><div class="line">        <span class="keyword">self</span>?.tableView.mj_footer.beginRefreshing()</div><div class="line">    <span class="keyword">case</span> .endFooterRefresh:</div><div class="line">        <span class="keyword">self</span>?.tableView.mj_footer.endRefreshing()</div><div class="line">    <span class="keyword">case</span> .noMoreData:</div><div class="line">        <span class="keyword">self</span>?.tableView.mj_footer.endRefreshingWithNoMoreData()</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">        <span class="keyword">break</span></div><div class="line">    &#125;</div><div class="line">&#125;).addDisposableTo(rx_disposeBag)</div></pre></td></tr></table></figure>
<h2 id="outputæä¾›ä¸€ä¸ªrequestCommondç”¨äºè¯·æ±‚æ•°æ®"><a href="#outputæä¾›ä¸€ä¸ªrequestCommondç”¨äºè¯·æ±‚æ•°æ®" class="headerlink" title="outputæä¾›ä¸€ä¸ªrequestCommondç”¨äºè¯·æ±‚æ•°æ®"></a>outputæä¾›ä¸€ä¸ªrequestCommondç”¨äºè¯·æ±‚æ•°æ®</h2><blockquote>
<p>PublishSubject çš„ç‰¹ç‚¹ï¼šå³å¯ä»¥ä½œä¸ºObservableï¼Œä¹Ÿå¯ä»¥ä½œä¸ºObserverï¼Œè¯´ç™½äº†å°±æ˜¯å¯ä»¥å‘é€ä¿¡å·ï¼Œä¹Ÿå¯ä»¥è®¢é˜…ä¿¡å·</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// å¤–ç•Œé€šè¿‡è¯¥å±æ€§å‘Šè¯‰viewModelåŠ è½½æ•°æ®ï¼ˆä¼ å…¥çš„å€¼æ˜¯ä¸ºäº†æ ‡å¿—æ˜¯å¦é‡æ–°åŠ è½½ï¼‰</span></div><div class="line"><span class="keyword">let</span> requestCommond = <span class="type">PublishSubject</span>&lt;<span class="type">Bool</span>&gt;()</div></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨transformä¸­ï¼Œæˆ‘ä»¬å¯¹ç”Ÿæˆçš„outputçš„requestCommondè¿›è¡Œè®¢é˜…</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   output.requestCommond.subscribe(onNext: &#123;[<span class="keyword">unowned</span> <span class="keyword">self</span>] isReloadData <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>.index = isReloadData ? <span class="number">1</span> : <span class="keyword">self</span>.index+<span class="number">1</span></div><div class="line">    lxfNetTool.request(.data(type: input.category, size: <span class="number">10</span>, index: <span class="keyword">self</span>.index)).mapArray(<span class="type">LXFModel</span>.<span class="keyword">self</span>).subscribe(&#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (event) <span class="keyword">in</span></div><div class="line">        <span class="keyword">switch</span> event &#123;</div><div class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .next(modelArr):</div><div class="line">            <span class="keyword">self</span>?.models.value = isReloadData ? modelArr : (<span class="keyword">self</span>?.models.value ?? []) + modelArr</div><div class="line">            <span class="type">LXFProgressHUD</span>.showSuccess(<span class="string">"åŠ è½½æˆåŠŸ"</span>)</div><div class="line">        <span class="keyword">case</span> <span class="keyword">let</span> .error(error):</div><div class="line">            <span class="type">LXFProgressHUD</span>.showError(error.localizedDescription)</div><div class="line">        <span class="keyword">case</span> .completed:</div><div class="line">            output.refreshStatus.value = isReloadData ? .endHeaderRefresh : .endFooterRefresh</div><div class="line">        &#125;</div><div class="line">    &#125;).addDisposableTo(<span class="keyword">self</span>.rx_disposeBag)</div><div class="line">&#125;).addDisposableTo(rx_disposeBag)</div></pre></td></tr></table></figure>
<h2 id="åœ¨ViewControllerä¸­åˆå§‹åŒ–åˆ·æ–°æ§ä»¶"><a href="#åœ¨ViewControllerä¸­åˆå§‹åŒ–åˆ·æ–°æ§ä»¶" class="headerlink" title="åœ¨ViewControllerä¸­åˆå§‹åŒ–åˆ·æ–°æ§ä»¶"></a>åœ¨ViewControllerä¸­åˆå§‹åŒ–åˆ·æ–°æ§ä»¶</h2><blockquote>
<p>ä¸ºtableViewè®¾ç½®åˆ·æ–°æ§ä»¶ï¼Œå¹¶ä¸”åœ¨åˆ›å»ºåˆ·æ–°æ§ä»¶çš„å›è°ƒä¸­ä½¿ç”¨outputçš„requestCommondå‘å°„ä¿¡å·</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   tableView.mj_header = <span class="type">MJRefreshNormalHeader</span>(refreshingBlock: &#123; </div><div class="line">    vmOutput.requestCommond.onNext(<span class="literal">true</span>)</div><div class="line">&#125;)</div><div class="line">tableView.mj_footer = <span class="type">MJRefreshAutoNormalFooter</span>(refreshingBlock: &#123; </div><div class="line">    vmOutput.requestCommond.onNext(<span class="literal">false</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="æ€»ç»“æµç¨‹"><a href="#æ€»ç»“æµç¨‹" class="headerlink" title="æ€»ç»“æµç¨‹"></a>æ€»ç»“æµç¨‹</h1><ul>
<li><p>ViewControllerå·²ç»æ‹¿åˆ°outputï¼Œå½“ä¸‹æ‹‰åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨outputçš„requestCommondå‘å°„ä¿¡æ¯ï¼Œå‘Šè¯‰viewModelæˆ‘ä»¬è¦åŠ è½½æ•°æ®</p>
</li>
<li><p>viewModelè¯·æ±‚æ•°æ®ï¼Œåœ¨å¤„ç†å®Œjsonè½¬æ¨¡å‹æˆ–æ¨¡å‹æ•°ç»„åä¿®æ”¹modelsï¼Œå½“modelsçš„å€¼è¢«ä¿®æ”¹çš„æ—¶å€™ä¼šå‘ä¿¡å·ç»™sectionsï¼Œsectionsåœ¨ViewControllerå·²ç»ç»‘å®šåˆ°tableViewçš„itemsäº†ï¼Œæ‰€ä»¥æ­¤æ—¶tableViewçš„æ•°æ®ä¼šè¢«æ›´æ–°ã€‚æ¥ç€æˆ‘ä»¬æ ¹æ®è¯·æ±‚ç»“æœï¼Œä¿®æ”¹outputçš„refreshStatuså±æ€§çš„å€¼</p>
<ul>
<li>å½“outputçš„refreshStatuså±æ€§çš„å€¼æ”¹å˜åï¼Œä¼šå‘å°„ä¿¡å·ï¼Œç”±äºå¤–ç•Œä¹‹å‰å·²ç»è®¢é˜…äº†outputçš„refreshStatusï¼Œæ­¤æ—¶å°±ä¼šæ ¹æ®refreshStatusçš„æ–°å€¼æ¥å¤„ç†åˆ·æ–°æ§ä»¶çš„çŠ¶æ€</li>
</ul>
<p><a href="http://blog.csdn.net/lincsdnnet/article/details/77896404" target="_blank" rel="external">yuan wen</a></p>
<p><a href="https://github.com/LinXunFeng/RxSwiftDemo" target="_blank" rel="external">demo</a></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/15/RxSwift/Grammar/RxSwift-èµ„æ–™/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/15/RxSwift/Grammar/RxSwift-èµ„æ–™/" itemprop="url">Swift-RxSwift-Grammar- èµ„æ–™</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-15T17:18:21+08:00">
                2017-12-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://blog.csdn.net/chelongfei/article/details/50969901" target="_blank" rel="external">Driver</a></p>
<p><a href="http://blog.csdn.net/chelongfei/article/details/75314346" target="_blank" rel="external">RxSwiftåœ¨UITableViewCellæˆ–è€…UICollectionViewCellä¸­ç»‘å®šæ•°æ®é‡åˆ°çš„UIæ··ä¹±çš„é—®é¢˜</a></p>
<p><a href="https://www.jianshu.com/p/d57ff2b3e0d4" target="_blank" rel="external">ã€RxSwiftç³»åˆ—ã€‘ç”¨RxSwiftå®ç°ä¸€ä¸ªUITableViewï¼ˆä¸€ï¼‰</a></p>
<p><a href="https://www.jianshu.com/p/e510bc944508" target="_blank" rel="external">MVVMæ¨¡å¼ä»¿å†™æ–—é±¼APPé¦–é¡µ</a></p>
<p><a href="https://www.jianshu.com/p/431f645cb805" target="_blank" rel="external">RxSwiftè¿›é˜¶ä¸å®æˆ˜</a></p>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/15/RxSwift/Grammar/åŸºæœ¬UIæ§ä»¶çš„æ‰©å±•/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="åƒå¤œ QQ:738816656">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åƒå¤œã€ãŠã‚Œã¯ãŠã¾ãˆã‚’ãšã£ã¨çˆ±ã—ã¦ã„ã‚‹">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/15/RxSwift/Grammar/åŸºæœ¬UIæ§ä»¶çš„æ‰©å±•/" itemprop="url">Swift-RxSwift-UIæ§ä»¶çš„æ‰©å±•</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-12-15T15:49:44+08:00">
                2017-12-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
                  ï¼Œ 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/RxSwift/" itemprop="url" rel="index">
                    <span itemprop="name">RxSwift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="UITextField-UITextView"><a href="#UITextField-UITextView" class="headerlink" title="UITextField / UITextView"></a>UITextField / UITextView</h1><h2 id="ç›‘å¬å¤šä¸ªUITextField"><a href="#ç›‘å¬å¤šä¸ªUITextField" class="headerlink" title="ç›‘å¬å¤šä¸ªUITextField"></a>ç›‘å¬å¤šä¸ªUITextField</h2><blockquote>
<p>ç›‘å¬ä¸‰ä¸ªUITextFieldéšä¾¿å“ªä¸ªçš„textå˜åŒ–äº†ï¼Œéƒ½ä¼šå¼•èµ·ä»£ç æ‰§è¡Œï¼Œå¹¶ä¸”ç»“æœèµ‹å€¼åˆ°resultçš„text</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> number1: <span class="type">UITextField</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> number2: <span class="type">UITextField</span>!</div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> number3: <span class="type">UITextField</span>!</div><div class="line"></div><div class="line"><span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> result: <span class="type">UILabel</span>!</div><div class="line"></div><div class="line"><span class="keyword">var</span> disposeBag = <span class="type">DisposeBag</span>()</div><div class="line"></div><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.viewDidLoad()</div><div class="line"></div><div class="line">    <span class="type">Observable</span>.combineLatest(number1.rx.text.orEmpty, number2.rx.text.orEmpty, number3.rx.text.orEmpty) &#123; textValue1, textValue2, textValue3 -&gt; <span class="type">Int</span> <span class="keyword">in</span></div><div class="line">        <span class="keyword">return</span> (<span class="type">Int</span>(textValue1) ?? <span class="number">0</span>) + (<span class="type">Int</span>(textValue2) ?? <span class="number">0</span>) + (<span class="type">Int</span>(textValue3) ?? <span class="number">0</span>)</div><div class="line">    &#125;</div><div class="line">    .<span class="built_in">map</span> &#123; $<span class="number">0</span>.description &#125;</div><div class="line">    .bindTo(result.rx.text)</div><div class="line">    .disposed(by: disposeBag)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å•ä¸ªUITextFieldå˜åŒ–ç›‘å¬"><a href="#å•ä¸ªUITextFieldå˜åŒ–ç›‘å¬" class="headerlink" title="å•ä¸ªUITextFieldå˜åŒ–ç›‘å¬"></a>å•ä¸ªUITextFieldå˜åŒ–ç›‘å¬</h2><blockquote>
<p>å®˜æ–¹ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// also test two way binding</span></div><div class="line"><span class="keyword">let</span> textValue = <span class="type">Variable</span>(<span class="string">""</span>)</div><div class="line"><span class="number">_</span> = textField.rx.textInput &lt;-&gt; textValue</div><div class="line"></div><div class="line">textValue.asObservable()</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] x <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.debug(<span class="string">"UITextField text \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ä¾‹å­ï¼šå•ä¸ªUITextFieldäº‹ä»¶ç›‘å¬</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">usernameTF.rx.controlEvent([.editingDidBegin]) <span class="comment">//çŠ¶æ€å¯ä»¥ç»„åˆ</span></div><div class="line"> .asObservable()</div><div class="line"> .subscribe(onNext: &#123; <span class="number">_</span> <span class="keyword">in</span></div><div class="line">     <span class="built_in">print</span>(<span class="string">"begin edit"</span>)</div><div class="line"> &#125;).disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h2 id="UITextFieldé‡åˆ°é”®ç›˜Next-GoæŒ‰é’®æ—¶ï¼Œç„¦ç‚¹çš„åˆ‡æ¢"><a href="#UITextFieldé‡åˆ°é”®ç›˜Next-GoæŒ‰é’®æ—¶ï¼Œç„¦ç‚¹çš„åˆ‡æ¢" class="headerlink" title="UITextFieldé‡åˆ°é”®ç›˜Next/GoæŒ‰é’®æ—¶ï¼Œç„¦ç‚¹çš„åˆ‡æ¢"></a>UITextFieldé‡åˆ°é”®ç›˜Next/GoæŒ‰é’®æ—¶ï¼Œç„¦ç‚¹çš„åˆ‡æ¢</h2><blockquote>
<p>è¿™é‡Œæœ‰ä¸ªå°å‘ï¼Œå¦‚æœusernameTFå’ŒpasswordTFç”¨äº†Observable.combineLatestç„¶åè®¢é˜…çš„è¯ï¼Œä½ ä¼šå‘ç°ä¸‹é¢çš„delegateä»£ç æ²¡ç”¨äº†ï¼Œåœ¨usernameTFç‚¹å‡»Next/Goä¸èƒ½åˆ‡æ¢åˆ°passwordTFäº†</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="function"><span class="keyword">func</span> <span class="title">textFieldShouldReturn</span><span class="params">(<span class="number">_</span> textField: UITextField)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">    <span class="keyword">if</span> textField == usernameTF &#123;</div><div class="line">        passwordTF.becomeFirstResponder()</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        passwordTF.resignFirstResponder()</div><div class="line">        <span class="type">Log</span>(<span class="string">"view become"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>ç”¨äº‹ä»¶ç›‘å¬å³å¯ï¼Œç›‘å¬return keyç»“æŸç¼–è¾‘çš„äº‹ä»¶(editingDidEndOnExit)ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  <span class="comment">/* editingDidEndOnExit: UIControlEvents // 'return key' ending editing */</span></div><div class="line"></div><div class="line">usernameTF.rx.controlEvent(.editingDidEndOnExit).subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (<span class="number">_</span>) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.passwordTF.becomeFirstResponder()</div><div class="line">&#125;).disposed(by: disposeBag)</div><div class="line"></div><div class="line">passwordTF.rx.controlEvent(.editingDidEndOnExit).subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] (<span class="number">_</span>) <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.passwordTF.resignFirstResponder()</div><div class="line">&#125;).disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="UITextViewå˜åŒ–ç›‘å¬"><a href="#UITextViewå˜åŒ–ç›‘å¬" class="headerlink" title="UITextViewå˜åŒ–ç›‘å¬"></a>UITextViewå˜åŒ–ç›‘å¬</h1><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   / also test two way binding</div><div class="line"><span class="keyword">let</span> textViewValue = <span class="type">Variable</span>(<span class="string">""</span>)</div><div class="line"><span class="number">_</span> = textView.rx.textInput &lt;-&gt; textViewValue</div><div class="line"></div><div class="line">textViewValue.asObservable()</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] x <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.debug(<span class="string">"UITextView text \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="UIButton-UIBarButtonItem"><a href="#UIButton-UIBarButtonItem" class="headerlink" title="UIButton / UIBarButtonItem"></a>UIButton / UIBarButtonItem</h1><h2 id="ç›‘å¬æŒ‰é’®çš„ç‚¹å‡»ï¼ˆtouchUpInsideï¼‰"><a href="#ç›‘å¬æŒ‰é’®çš„ç‚¹å‡»ï¼ˆtouchUpInsideï¼‰" class="headerlink" title="ç›‘å¬æŒ‰é’®çš„ç‚¹å‡»ï¼ˆtouchUpInsideï¼‰"></a>ç›‘å¬æŒ‰é’®çš„ç‚¹å‡»ï¼ˆtouchUpInsideï¼‰</h2><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> doSomethingOutlet: <span class="type">UIButton</span>!</div><div class="line">    </div><div class="line">doSomethingOutlet.rx.tap</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span> </div><div class="line">        <span class="keyword">self</span>?.showAlert() <span class="comment">//è¿™é‡ŒselfæŒ‡vc</span></div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<blockquote>
<p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">button.rx.tap</div><div class="line">  .bindNext &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] <span class="keyword">in</span></div><div class="line">      <span class="keyword">self</span>?.openAppPreferences()</div><div class="line">  &#125;</div><div class="line">  .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="UISegmentedControl-UISwitch"><a href="#UISegmentedControl-UISwitch" class="headerlink" title="UISegmentedControl / UISwitch"></a>UISegmentedControl / UISwitch</h1><blockquote>
<p>ç›‘å¬çŠ¶æ€åˆ‡æ¢</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// also test two way binding</span></div><div class="line"><span class="keyword">let</span> segmentedValue = <span class="type">Variable</span>(<span class="number">0</span>)</div><div class="line"><span class="number">_</span> = segmentedControl.rx.value &lt;-&gt; segmentedValue</div><div class="line"></div><div class="line">segmentedValue.asObservable()</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] x <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.debug(<span class="string">"UISegmentedControl value \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div><div class="line">    </div><div class="line">    </div><div class="line"><span class="comment">// also test two way binding</span></div><div class="line"><span class="keyword">let</span> switchValue = <span class="type">Variable</span>(<span class="literal">true</span>)</div><div class="line"><span class="number">_</span> = switcher.rx.value &lt;-&gt; switchValue</div><div class="line"></div><div class="line">switchValue.asObservable()</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] x <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.debug(<span class="string">"UISwitch value \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="UIActivityIndicatorView"><a href="#UIActivityIndicatorView" class="headerlink" title="UIActivityIndicatorView"></a>UIActivityIndicatorView</h1><blockquote>
<p>çŠ¶æ€æŒ‡ç¤ºå™¨æ ¹æ®UISwitchçš„çŠ¶æ€æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºæ—‹è½¬</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">switcher.rx.value</div><div class="line"> .bindTo(activityIndicator.rx.isAnimating)</div><div class="line"> .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="UISlider"><a href="#UISlider" class="headerlink" title="UISlider"></a>UISlider</h1><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// also test two way binding</span></div><div class="line"><span class="keyword">let</span> sliderValue = <span class="type">Variable</span>&lt;<span class="type">Float</span>&gt;(<span class="number">1.0</span>)</div><div class="line"><span class="number">_</span> = slider.rx.value &lt;-&gt; sliderValue</div><div class="line"></div><div class="line">sliderValue.asObservable()</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] x <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.debug(<span class="string">"UISlider value \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="UIDatePicker"><a href="#UIDatePicker" class="headerlink" title="UIDatePicker"></a>UIDatePicker</h1><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="comment">// also test two way binding</span></div><div class="line"><span class="keyword">let</span> dateValue = <span class="type">Variable</span>(<span class="type">Date</span>(timeIntervalSince1970: <span class="number">0</span>))</div><div class="line"><span class="number">_</span> = datePicker.rx.date &lt;-&gt; dateValue</div><div class="line"></div><div class="line">dateValue.asObservable()</div><div class="line">    .subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] x <span class="keyword">in</span></div><div class="line">        <span class="keyword">self</span>?.debug(<span class="string">"UIDatePicker date \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="UIGestureRecognizer"><a href="#UIGestureRecognizer" class="headerlink" title="UIGestureRecognizer"></a>UIGestureRecognizer</h1><blockquote>
<p>æ‰‹åŠ¿å›è°ƒï¼Œxæ˜¯UIPanGestureRecognizerå¯¹è±¡</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   mypan.rx.event</div><div class="line">.subscribe(onNext: &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] x <span class="keyword">in</span></div><div class="line">    <span class="keyword">self</span>?.debug(<span class="string">"UIGestureRecognizer event \(x.state)"</span>)</div><div class="line">    <span class="keyword">let</span> p = x.location(<span class="keyword">in</span>: x.view)</div><div class="line">    <span class="keyword">self</span>?.debug(<span class="string">"pan ges point: \(p)"</span>)</div><div class="line">&#125;)</div><div class="line">.disposed(by: disposeBag)</div></pre></td></tr></table></figure>
<h1 id="CLLocationManager"><a href="#CLLocationManager" class="headerlink" title="CLLocationManager"></a>CLLocationManager</h1><blockquote>
<p>è¿˜æœ‰ä¸€å †didxxxæ–¹æ³•ï¼Œè‡ªå·±Commandç‚¹è¿›å»çœ‹</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">  manager.requestWhenInUseAuthorization()</div><div class="line"></div><div class="line">manager.rx.didUpdateLocations</div><div class="line">    .subscribe(onNext: &#123; x <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"rx.didUpdateLocations \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div><div class="line"></div><div class="line"><span class="number">_</span> = manager.rx.didFailWithError</div><div class="line">    .subscribe(onNext: &#123; x <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"rx.didFailWithError \(x)"</span>)</div><div class="line">    &#125;)</div><div class="line">    </div><div class="line">manager.rx.didChangeAuthorizationStatus</div><div class="line">    .subscribe(onNext: &#123; status <span class="keyword">in</span></div><div class="line">        <span class="built_in">print</span>(<span class="string">"Authorization status \(status)"</span>)</div><div class="line">    &#125;)</div><div class="line">    .disposed(by: disposeBag)</div><div class="line">    </div><div class="line">manager.startUpdatingLocation()</div></pre></td></tr></table></figure>
<h1 id="UITableViewçš„æ‰©å±•"><a href="#UITableViewçš„æ‰©å±•" class="headerlink" title="UITableViewçš„æ‰©å±•"></a>UITableViewçš„æ‰©å±•</h1><h2 id="å•ä¸ªsectionçš„æƒ…å†µ"><a href="#å•ä¸ªsectionçš„æƒ…å†µ" class="headerlink" title="å•ä¸ªsectionçš„æƒ…å†µ"></a>å•ä¸ªsectionçš„æƒ…å†µ</h2><blockquote>
<p>é™¤äº†ä¸‹é¢å‡ ä¸ªæœ€å¸¸ç”¨çš„ï¼Œè¿˜æœ‰itemDeselectedã€itemInsertedã€itemDeletedç­‰ç­‰è¡Œä¸ºå¯ä»¥è®¢é˜…ï¼Œè‡ªå·±Commandç‚¹è¿›å»çœ‹</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="code"><pre><div class="line"> <span class="class"><span class="keyword">class</span> <span class="title">SimpleTableViewExampleViewController</span> : <span class="title">ViewController</span>, <span class="title">UITableViewDelegate</span> </span>&#123;</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> tableView: <span class="type">UITableView</span>!</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line"></div><div class="line">        <span class="keyword">let</span> items = <span class="type">Observable</span>.just(</div><div class="line">            (<span class="number">0</span>..&lt;<span class="number">20</span>).<span class="built_in">map</span> &#123; <span class="string">"\($0)"</span> &#125;</div><div class="line">        )</div><div class="line"></div><div class="line">        <span class="comment">//å¤§æ¦‚æ˜¯å¯¹cellForRowAtIndexPathçš„å°è£…</span></div><div class="line">        items</div><div class="line">            .bindTo(tableView.rx.items(cellIdentifier: <span class="string">"Cell"</span>, cellType: <span class="type">UITableViewCell</span>.<span class="keyword">self</span>)) &#123;</div><div class="line">                (row, element, cell) <span class="keyword">in</span></div><div class="line">                <span class="comment">//element æ˜¯ items[row]å…ƒç´ </span></div><div class="line">                cell.textLabel?.text = <span class="string">"\(element) @ row \(row)"</span></div><div class="line">            &#125;</div><div class="line">            .disposed(by: disposeBag)</div><div class="line"></div><div class="line">        </div><div class="line">        <span class="comment">//ç‚¹å‡»æŸä¸ªcellè§¦å‘, value æ˜¯ items[row]ï¼Œç±»ä¼¼çš„æ˜¯tableView.rx.itemSelectedï¼Œéƒ½æ˜¯å¯¹didSelectRowAtIndexPathçš„å°è£…</span></div><div class="line">        tableView.rx</div><div class="line">            .modelSelected(<span class="type">String</span>.<span class="keyword">self</span>)</div><div class="line">            .subscribe(onNext:  &#123; value <span class="keyword">in</span></div><div class="line">                <span class="type">DefaultWireframe</span>.presentAlert(<span class="string">"Tapped `\(value)`"</span>)</div><div class="line">            &#125;)</div><div class="line">            .disposed(by: disposeBag)</div><div class="line"></div><div class="line">        <span class="comment">//accessoryButtonTappedForRowWithIndexPath</span></div><div class="line">        tableView.rx</div><div class="line">            .itemAccessoryButtonTapped</div><div class="line">            .subscribe(onNext: &#123; indexPath <span class="keyword">in</span></div><div class="line">                <span class="type">DefaultWireframe</span>.presentAlert(<span class="string">"Tapped Detail @ \(indexPath.section),\(indexPath.row)"</span>)</div><div class="line">            &#125;)</div><div class="line">            .disposed(by: disposeBag)</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="å¤šsectionçš„æƒ…å†µ"><a href="#å¤šsectionçš„æƒ…å†µ" class="headerlink" title="å¤šsectionçš„æƒ…å†µ"></a>å¤šsectionçš„æƒ…å†µ</h2><figure class="highlight swift"><table><tr><td class="code"><pre><div class="line">   <span class="class"><span class="keyword">class</span> <span class="title">SimpleTableViewExampleSectionedViewController</span> : <span class="title">ViewController</span>, <span class="title">UITableViewDelegate</span> </span>&#123;</div><div class="line">    <span class="meta">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> tableView: <span class="type">UITableView</span>!</div><div class="line"></div><div class="line">    <span class="keyword">let</span> dataSource = <span class="type">RxTableViewSectionedReloadDataSource</span>&lt;<span class="type">SectionModel</span>&lt;<span class="type">String</span>, <span class="type">Double</span>&gt;&gt;()</div><div class="line"></div><div class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">        <span class="keyword">super</span>.viewDidLoad()</div><div class="line"></div><div class="line">        <span class="keyword">let</span> dataSource = <span class="keyword">self</span>.dataSource</div><div class="line"></div><div class="line">        <span class="keyword">let</span> items = <span class="type">Observable</span>.just([</div><div class="line">            <span class="type">SectionModel</span>(model: <span class="string">"First section"</span>, items: [</div><div class="line">                    <span class="number">11.0</span>,</div><div class="line">                    <span class="number">12.0</span>,</div><div class="line">                    <span class="number">13.0</span></div><div class="line">                ]),</div><div class="line">            <span class="type">SectionModel</span>(model: <span class="string">"Second section"</span>, items: [</div><div class="line">                    <span class="number">21.0</span>,</div><div class="line">                    <span class="number">22.0</span>,</div><div class="line">                    <span class="number">23.0</span></div><div class="line">                ]),</div><div class="line">            <span class="type">SectionModel</span>(model: <span class="string">"Third section"</span>, items: [</div><div class="line">                    <span class="number">31.0</span>,</div><div class="line">                    <span class="number">32.0</span>,</div><div class="line">                    <span class="number">33.0</span></div><div class="line">                ]),</div><div class="line">            ])</div><div class="line"></div><div class="line">        dataSource.configureCell = &#123; (<span class="number">_</span>, tv, indexPath, element) <span class="keyword">in</span></div><div class="line">            <span class="keyword">let</span> cell = tv.dequeueReusableCell(withIdentifier: <span class="string">"Cell"</span>)!</div><div class="line">            cell.textLabel?.text = <span class="string">"\(element) @ row \(indexPath.row)"</span></div><div class="line">            <span class="keyword">return</span> cell</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        items</div><div class="line">            .bindTo(tableView.rx.items(dataSource: dataSource))</div><div class="line">            .disposed(by: disposeBag)</div><div class="line"></div><div class="line">        tableView.rx</div><div class="line">            .itemSelected</div><div class="line">            .<span class="built_in">map</span> &#123; indexPath <span class="keyword">in</span></div><div class="line">                <span class="keyword">return</span> (indexPath, dataSource[indexPath])</div><div class="line">            &#125;</div><div class="line">            .subscribe(onNext: &#123; indexPath, model <span class="keyword">in</span></div><div class="line">                <span class="type">DefaultWireframe</span>.presentAlert(<span class="string">"Tapped `\(model)` @ \(indexPath)"</span>)</div><div class="line">            &#125;)</div><div class="line">            .disposed(by: disposeBag)</div><div class="line"></div><div class="line">        tableView.rx</div><div class="line">            .setDelegate(<span class="keyword">self</span>)</div><div class="line">            .disposed(by: disposeBag)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, viewForHeaderInSection section: Int)</span></span> -&gt; <span class="type">UIView</span>? &#123;</div><div class="line">        <span class="keyword">let</span> label = <span class="type">UILabel</span>(frame: <span class="type">CGRect</span>.zero)</div><div class="line">        label.text = dataSource[section].model</div><div class="line">        <span class="keyword">return</span> label</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, heightForHeaderInSection section: Int)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">30</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// to prevent swipe to delete behavior</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, editingStyleForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCellEditingStyle</span> &#123;</div><div class="line">        <span class="keyword">return</span> .<span class="keyword">none</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="https://www.darkhandz.com/2017/02/06/%E5%AD%A6%E4%B9%A0RxSwift%E7%9A%84%E4%B8%80%E4%BA%9B%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95/" target="_blank" rel="external">åŸæ–‡</a></p>

          
        
      
    </div>
    
    
    

    



    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">åƒå¤œ QQ:738816656</p>
              <p class="site-description motion-element" itemprop="description">ReactNative</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">201</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">106</span>
                  <span class="site-state-item-name">åˆ†ç±»</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">77</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">åƒå¤œ QQ:738816656</span>

  
</div>





        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

<!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ -->
<script type="text/javascript" src="/js/src/love.js"></script>
